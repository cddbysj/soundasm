{"version":3,"sources":["components/Work/index.module.css","components/AuthorProfile/index.module.css","components/RjSearchBar/index.js","components/TopNav/index.js","myConstants/routes.js","api/index.js","config/keys.js","store/authors/authors.actions.js","store/authors/authors.actionTypes.js","myConstants/index.js","pages/AddWork/index.js","store/tags/tags.actions.js","store/tags/tags.actionTypes.js","store/works/works.actions.js","store/works/works.actionTypes.js","components/CommentList/index.js","components/CommentEditor/index.js","components/Comments/index.js","store/comments/comments.actions.js","store/comments/comments.actionTypes.js","components/Work/index.js","pages/Home/index.js","components/VisibilityFilter/index.js","store/visibilityFilter/visibilityFilter.actions.js","store/visibilityFilter/visibilityFilter.actionTypes.js","components/WorkList/index.js","pages/Works/index.js","components/AuthorProfile/index.js","pages/Authors/index.js","pages/Tags/index.js","pages/FaqPage/index.js","pages/AddAuthorProfile/index.js","store/authorProfile/authorProfile.acitons.js","store/authorProfile/authorProfile.actionTypes.js","components/SignIn/index.js","store/auth/auth.actions.js","store/auth/auth.actionTypes.js","components/SignOut/index.js","components/Layout/index.js","components/App/index.js","serviceWorker.js","store/auth/auth.reducer.js","store/works/works.reducer.js","store/tags/tags.reducer.js","store/authors/authors.reducer.js","store/authorProfile/authorProfile.reducer.js","store/comments/comments.reducer.js","store/visibilityFilter/visibilityFilter.reducer.js","store/rootReducer.js","store/index.js","index.js"],"names":["module","exports","Search","RjSearchBar","useState","tips","setTips","title","placeholder","style","width","onSearch","rj","console","log","RJ","toUpperCase","length","number","parseInt","slice","startsWith","validateRJ","window","open","allowClear","TopNav","size","to","type","icon","PlusOutlined","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","firestore","worksRef","collection","authorsRef","tagsRef","commentsRef","storageRef","FieldValue","delete","batch","storage","ref","addAuthors","newAuthors","dispatch","a","payload","error","updatedData","Array","isArray","forEach","author","doc","set","merge","LANGUAGES","AGE_RATING","TextArea","Option","layout","labelCol","span","wrapperCol","tailLayout","offset","languageSelections","map","language","key","connect","state","tags","authors","works","addTags","data","tag","checkWorkExists","work","exists","emptys","Promise","where","get","empty","all","addWork","isOperating","workData","id","updateWork","useForm","form","location","useLocation","tagItems","authorItems","isEditMode","currentTags","setCurrentTags","currentAuthors","setCurrentAuthors","initialValues","editAt","moment","info","url","imageSrc","Illustrator","description","rating","star","hasGot","script","onFinish","format","message","success","warn","resetFields","Item","label","name","rules","required","mode","onChange","setFieldsValue","formalizedTAuthors","trim","tokenSeparators","loading","isFetching","Object","keys","Group","value","autoSize","formalizedTags","toLowerCase","minRows","showTime","dateString","htmlType","block","CommentList","commentList","dataSource","itemLayout","renderItem","item","content","datetime","fromNow","CommentEditor","workId","commitComment","isSubmitting","comment","commentData","whitespace","maxRows","getComments","comments","commentItems","addComment","newComment","fetchCommentsByWork","currentUser","email","split","useEffect","Title","Paragraph","Work","gutter","align","className","styles","cover","src","alt","flex","level","color","href","target","rel","defaultValue","pathname","EditOutlined","Home","setVisibilityFilter","filter","authorList","tagList","direction","position","showSearch","e","onlyShowWorksWithScript","enterButton","onClick","WorkList","items","maxWidth","pagination","defaultPageSize","footer","extra","Meta","hash","margin","getVisibleWorks","count","filteredItems","isMatchAuthor","includes","isMatchTag","isMatchLanguage","isMatchRating","isMatchRj","isMatchTitle","isMatchHasScript","visibilityFilter","delay","Text","AuthorProfile","profile","useTransition","from","opacity","transform","enter","leave","config","gentle","props","div","header","avatar","bio","ExportOutlined","greetings","evaluation","authorProfile","history","useHistory","profiles","currentAuthor","setCurrentAuthor","isfetching","UserOutlined","shape","fetchTags","FaqPage","copyable","formLayout","coverFlow","representativeWorks","addAuthorProfile","uploadAvatar","file","onProgress","onError","onSuccess","metadata","contentType","uploadTask","child","put","on","TaskEvent","STATE_CHANGED","snapshot","progress","bytesTransferred","totalBytes","precent","TaskState","PAUSED","RUNNING","code","getDownloadURL","then","downloadURL","profileData","uploadToStorage","filename","withCredentials","action","headers","valuePropName","authorization","customRequest","beforeUpload","status","fileList","UploadOutlined","signIn","password","signInWithEmailAndPassword","push","height","display","alignItems","justifyContent","onFinishFailed","errorInfo","prefix","MailOutlined","Password","LockOutlined","signOut","LogoutOutlined","Header","Sider","Content","fetchWorks","theme","minHeight","flexDirection","font","letterSpacing","padding","defaultSelectedKeys","HomeOutlined","CustomerServiceOutlined","TagsOutlined","GlobalOutlined","background","path","exact","Works","Authors","Tags","locale","setCurrentUser","unsubscribeFromAuth","onAuthStateChanged","user","uid","orderBy","querySnapshot","docs","fetchAuthors","authorsDoc","tagsDoc","fetchAuthorProfiles","profilesData","subscribeAuth","zhCN","basename","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","catch","initialState","allWorksLoaded","reducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","document","getElementById","URL","process","origin","addEventListener","fetch","response","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.9fb5c580.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"cover\":\"Work_cover__3q4AU\",\"script\":\"Work_script__2l54C\",\"info\":\"Work_info__bHzz2\",\"tag\":\"Work_tag__23HTW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AuthorProfile_header__1sDCS\",\"bio\":\"AuthorProfile_bio__1kQOh\",\"slidein\":\"AuthorProfile_slidein__2LAdf\"};","// RJ 搜索框组件\r\nimport React, { useState } from \"react\";\r\nimport { Input, Tooltip } from \"antd\";\r\n\r\nconst { Search } = Input;\r\n\r\nconst DL_URL = \"https://www.dlsite.com/maniax/work/=/product_id/\";\r\n\r\nconst validateRJ = (rj) => {\r\n  if (rj.length === 8) {\r\n    const number = parseInt(rj.slice(2));\r\n    if (rj.startsWith(\"RT\")) return true;\r\n    return rj.startsWith(\"RJ\") && number >= 1000 && number <= 400000;\r\n  }\r\n\r\n  if (rj.length === 6) {\r\n    const number = parseInt(rj);\r\n    return number >= 1000 && number <= 400000;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nconst RjSearchBar = () => {\r\n  const [tips, setTips] = useState(\"\");\r\n\r\n  const handleRjSearch = (rj) => {\r\n    console.log(\"rj\", rj);\r\n    const RJ = rj.toUpperCase();\r\n    if (validateRJ(RJ)) {\r\n      window.open(`${DL_URL}${RJ}.html`, \"_blank\");\r\n    } else {\r\n      setTips(\"格式：RJ138503\");\r\n      return;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Tooltip title={tips}>\r\n      <Search\r\n        placeholder=\"输入 RJ 编号\"\r\n        style={{ width: 160 }}\r\n        onSearch={handleRjSearch}\r\n        allowClear\r\n      />\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default RjSearchBar;\r\n","// 顶部操作导航组件\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button, Space } from 'antd';\r\nimport { PlusOutlined } from '@ant-design/icons';\r\nimport * as ROUTES from 'myConstants/routes';\r\nimport RjSearchBar from 'components/RjSearchBar';\r\n\r\nconst TopNav = () => {\r\n  return (\r\n    <Space size=\"middle\">\r\n      <Link to={ROUTES.ADD_WORK}>\r\n        <Button type=\"dashed\" icon={<PlusOutlined />}>\r\n          添加作品\r\n        </Button>\r\n      </Link>\r\n      <Link to={ROUTES.ADD_AUTHOR}>\r\n        <Button type=\"dashed\" icon={<PlusOutlined />}>\r\n          添加艺术家\r\n        </Button>\r\n      </Link>\r\n      <RjSearchBar />\r\n    </Space>\r\n  );\r\n};\r\n\r\nexport default TopNav;\r\n","export const HOME_PAGE = '/';\r\nexport const ADD_WORK = '/addWork';\r\nexport const ADD_AUTHOR = '/addAuthor';\r\nexport const WORK_PAGE = '/work';\r\nexport const WORKS_PAGE = '/works';\r\nexport const AUTHORS_PAGE = '/authors';\r\nexport const TAGS_PAGE = '/tags';\r\nexport const FAQ_PAGE = '/faq';\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/storage\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nimport { FirebaseConfig } from \"../config/keys\";\r\nfirebase.initializeApp(FirebaseConfig);\r\n\r\n// 用户身份验证\r\nexport const auth = firebase.auth();\r\n\r\nconst db = firebase.firestore();\r\n\r\n// 作品集合引用\r\nexport const worksRef = db.collection(\"works\");\r\n// 作者集合引用\r\nexport const authorsRef = db.collection(\"authors\");\r\n// 标签集合引用\r\nexport const tagsRef = db.collection(\"tags\");\r\n// 评论集合引用\r\nexport const commentsRef = db.collection(\"comments\");\r\n\r\n// 删除特定字段\r\nexport const deleteField = firebase.firestore.FieldValue.delete;\r\n\r\n// 批量写入\r\nexport const batchWrite = db.batch;\r\n\r\n// 存储引用\r\nexport const storageRef = firebase.storage().ref();\r\nexport const storage = firebase.storage;\r\n","export const FirebaseConfig = {\r\n  apiKey: \"AIzaSyBaj7axNAlxURzJKyk7ouCLQjQcFBqrLgg\",\r\n  authDomain: \"soundgasm-886ff.firebaseapp.com\",\r\n  databaseURL: \"https://soundgasm-886ff.firebaseio.com\",\r\n  projectId: \"soundgasm-886ff\",\r\n  storageBucket: \"soundgasm-886ff.appspot.com\",\r\n  messagingSenderId: \"987949269498\",\r\n  appId: \"1:987949269498:web:e7a749ba974731d2222443\",\r\n  measurementId: \"G-M49309VSDC\"\r\n};\r\n","import { authorsRef } from \"api\";\r\nimport {\r\n  ADD_AUTHORS,\r\n  ADD_AUTHORS_FAIL,\r\n  ADD_AUTHORS_DONE,\r\n  FETCH_AUTHORS_DONE,\r\n  FETCH_AUTHORS,\r\n  FETCH_AUTHORS_FAIL,\r\n} from \"store/authors/authors.actionTypes\";\r\n\r\n// 只获取作者名字列表，不包含作者其他信息\r\nexport const fetchAuthors = () => async (dispatch) => {\r\n  dispatch({\r\n    type: FETCH_AUTHORS,\r\n    payload: { isFetching: true, error: null, authorItems: {} },\r\n  });\r\n\r\n  try {\r\n    const authorsDoc = await authorsRef.doc(\"all\").get();\r\n    const authorItems = authorsDoc.data();\r\n\r\n    dispatch({\r\n      type: FETCH_AUTHORS_DONE,\r\n      payload: { isFetching: false, error: null, authorItems },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: FETCH_AUTHORS_FAIL,\r\n      payload: { isFetching: false, error },\r\n    });\r\n  }\r\n};\r\n\r\nexport const addAuthors = (newAuthors) => async (dispatch) => {\r\n  dispatch({\r\n    type: ADD_AUTHORS,\r\n    payload: { error: null },\r\n  });\r\n\r\n  try {\r\n    const updatedData = {};\r\n    Array.isArray(newAuthors)\r\n      ? newAuthors.forEach((author) => (updatedData[author] = author))\r\n      : (updatedData[newAuthors] = newAuthors);\r\n    await authorsRef.doc(\"all\").set(updatedData, { merge: true });\r\n    dispatch({\r\n      type: ADD_AUTHORS_DONE,\r\n      payload: { newAuthors: updatedData },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ADD_AUTHORS_FAIL,\r\n      payload: { error },\r\n    });\r\n  }\r\n};\r\n","// 获取作者\r\nexport const FETCH_AUTHORS = \"FETCH_AUTHORS\";\r\nexport const FETCH_AUTHORS_FAIL = \"FETCH_AUTHORS_FAIL\";\r\nexport const FETCH_AUTHORS_DONE = \"FETCH_AUTHORS_DONE\";\r\n\r\nexport const FETCH_LANGUAGES = \"FETCH_LANGUAGES\";\r\n\r\n// 增加作者 单个或者多个\r\nexport const ADD_AUTHORS = \"ADD_AUTHORS\";\r\nexport const ADD_AUTHORS_FAIL = \"ADD_AUTHORS_FAIL\";\r\nexport const ADD_AUTHORS_DONE = \"ADD_AUTHORS_DONE\";\r\n\r\n// 更新作者\r\nexport const UPDATE_AUTHORS = \"UPDATE_AUTHORS\";\r\nexport const UPDATE_AUTHORS_FAIL = \"UPDATE_AUTHORS_FAIL\";\r\nexport const UPDATE_AUTHORS_DONE = \"UPDATE_AUTHORS_DONE\";","export const LANGUAGES = [\r\n  'English',\r\n  'Japanese',\r\n  'Chinese',\r\n  'Korean',\r\n  'Spanish',\r\n  'French',\r\n];\r\n\r\nexport const AGE_RATING = ['ALL_AGE', 'R15', 'R18'];\r\n","// 添加一个作品\r\nimport React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport * as moment from \"moment\";\r\nimport {\r\n  Form,\r\n  Input,\r\n  Radio,\r\n  Rate,\r\n  Button,\r\n  Select,\r\n  message,\r\n  DatePicker,\r\n} from \"antd\";\r\nimport {\r\n  checkWorkExists,\r\n  addWork,\r\n  updateWork,\r\n} from \"store/works/works.actions\";\r\nimport { addTags } from \"store/tags/tags.actions\";\r\nimport { addAuthors } from \"store/authors/authors.actions\";\r\nimport { LANGUAGES } from \"myConstants\";\r\n\r\nconst { TextArea } = Input;\r\nconst { Option } = Select;\r\n\r\nconst layout = {\r\n  labelCol: { span: 6 },\r\n  wrapperCol: { span: 12 },\r\n};\r\n\r\nconst tailLayout = {\r\n  wrapperCol: {\r\n    offset: 6,\r\n    span: 6,\r\n  },\r\n};\r\n\r\nconst MOMENT_FORMAT = \"YYYY-MM-DD hh:mm:ss\";\r\n\r\nconst languageSelections = LANGUAGES.map((language) => (\r\n  <Option key={language}>{language}</Option>\r\n));\r\n\r\nconst AddWork = ({\r\n  works,\r\n  tags,\r\n  addTags,\r\n  checkWorkExists,\r\n  addWork,\r\n  updateWork,\r\n  authors,\r\n  addAuthors,\r\n}) => {\r\n  const [form] = Form.useForm();\r\n  const location = useLocation();\r\n\r\n  const { isOperating } = works;\r\n  const { tagItems } = tags;\r\n  const { authorItems } = authors;\r\n\r\n  // 是否编辑模式\r\n  const isEditMode = !!location.state;\r\n\r\n  // 当前作品要添加的标签\r\n  const [currentTags, setCurrentTags] = useState(\r\n    isEditMode ? location.state.tags : []\r\n  );\r\n  // 当前作品要添加的作者\r\n  const [currentAuthors, setCurrentAuthors] = useState(\r\n    isEditMode ? location.state.author : []\r\n  );\r\n\r\n  const initialValues = isEditMode\r\n    ? {\r\n        ...location.state,\r\n        editAt: moment(location.state.editAt, MOMENT_FORMAT),\r\n        info: location.state.info ? location.state.info : null,\r\n      }\r\n    : {\r\n        title: \"\",\r\n        author: [],\r\n        rj: null,\r\n        url: null,\r\n        imageSrc: null,\r\n        Illustrator: null,\r\n        description: null,\r\n        tags: [],\r\n        rating: \"R18\",\r\n        star: 4,\r\n        hasGot: true,\r\n        language: [],\r\n        info: null,\r\n        script: null,\r\n        editAt: moment(),\r\n      };\r\n\r\n  const onFinish = async (work) => {\r\n    console.log(\"提交的表格数据\", work);\r\n\r\n    const workData = {\r\n      ...work,\r\n      editAt: work.editAt.format(MOMENT_FORMAT),\r\n    };\r\n\r\n    if (isEditMode) {\r\n      const { id } = location.state;\r\n      try {\r\n        await Promise.all([\r\n          updateWork({\r\n            ...workData,\r\n            id,\r\n          }),\r\n          addTags(currentTags),\r\n          addAuthors(currentAuthors),\r\n        ]);\r\n        message.success(\"更新作品成功\", 1);\r\n      } catch (error) {\r\n        message.error(\"更新作品失败\", 2);\r\n      }\r\n    } else {\r\n      const isWorkExists = await checkWorkExists(work);\r\n      if (isWorkExists) {\r\n        message.warn(\"该作品已存在\", 2);\r\n        form.resetFields();\r\n        return;\r\n      }\r\n      try {\r\n        await Promise.all([\r\n          addWork(workData),\r\n          addTags(currentTags),\r\n          addAuthors(currentAuthors),\r\n        ]);\r\n        message.success(\"添加作品成功\", 1);\r\n      } catch (error) {\r\n        message.error(\"添加作品失败\", 2);\r\n      }\r\n    }\r\n    form.resetFields();\r\n  };\r\n\r\n  const handleTagsChange = (tags) => {\r\n    console.log(\"tags:\", tags);\r\n    form.setFieldsValue({ tags });\r\n    const formalizedTags = tags.map((tag) => tag.trim().toLowerCase());\r\n    setCurrentTags(formalizedTags);\r\n  };\r\n\r\n  const handleAuthorsChange = (authors) => {\r\n    console.log(\"authors:\", authors);\r\n    form.setFieldsValue({ authors });\r\n    const formalizedTAuthors = authors.map((author) => author.trim());\r\n    setCurrentAuthors(formalizedTAuthors);\r\n  };\r\n\r\n  const handleDateChange = (editAt, dateString) => {\r\n    console.log(\"selected value:\", editAt);\r\n    console.log(\"formatted value:\", dateString);\r\n    form.setFieldsValue({ editAt });\r\n  };\r\n\r\n  return (\r\n    <Form\r\n      initialValues={initialValues}\r\n      onFinish={onFinish}\r\n      form={form}\r\n      {...layout}\r\n    >\r\n      <Form.Item\r\n        label=\"标题\"\r\n        name=\"title\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"请输入标题\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"作者\"\r\n        name=\"author\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"请输入作者\",\r\n          },\r\n        ]}\r\n      >\r\n        <Select\r\n          mode=\"tags\"\r\n          onChange={handleAuthorsChange}\r\n          tokenSeparators={[\"/\", \"&\"]}\r\n          loading={authors.isFetching}\r\n        >\r\n          {Object.keys(authorItems).map((author) => (\r\n            <Option key={author}>{author}</Option>\r\n          ))}\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item label=\"链接\" name=\"url\">\r\n        <Input />\r\n      </Form.Item>\r\n      <Form.Item label=\"封面 URL\" name=\"imageSrc\">\r\n        <Input />\r\n      </Form.Item>\r\n      <Form.Item label=\"插画师\" name=\"Illustrator\">\r\n        <Input />\r\n      </Form.Item>\r\n      <Form.Item label=\"RJ\" name=\"rj\">\r\n        <Input />\r\n      </Form.Item>\r\n      <Form.Item label=\"年龄分级\" name=\"rating\">\r\n        <Radio.Group>\r\n          <Radio value=\"ALL_AGE\">全年龄</Radio>\r\n          <Radio value=\"R15\">R15</Radio>\r\n          <Radio value=\"R18\">R18</Radio>\r\n        </Radio.Group>\r\n      </Form.Item>\r\n      <Form.Item label=\"描述\" name=\"description\">\r\n        <TextArea autoSize></TextArea>\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"语言\"\r\n        name=\"language\"\r\n        rules={[{ required: true, message: \"请指定作品语言\" }]}\r\n      >\r\n        <Select mode=\"tags\" style={{ width: \"100%\" }}>\r\n          {languageSelections}\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item label=\"标签\" name=\"tags\">\r\n        <Select\r\n          mode=\"tags\"\r\n          style={{ width: \"100%\" }}\r\n          onChange={handleTagsChange}\r\n          loading={tags.isFetching}\r\n          tokenSeparators={[\"/\", \"\\\\\", \"、\", \"[\", \"]\"]}\r\n        >\r\n          {Object.keys(tagItems).map((tag) => (\r\n            <Option key={tag}>{tag}</Option>\r\n          ))}\r\n        </Select>\r\n      </Form.Item>\r\n      <Form.Item label=\"是否拥有\" name=\"hasGot\">\r\n        <Radio.Group>\r\n          <Radio value={true}>是</Radio>\r\n          <Radio value={false}>否</Radio>\r\n        </Radio.Group>\r\n      </Form.Item>\r\n      <Form.Item label=\"打分\" name=\"star\">\r\n        <Rate />\r\n      </Form.Item>\r\n      <Form.Item label=\"信息\" name=\"info\">\r\n        <TextArea\r\n          placeholder=\"作品目录、时长、来源等\"\r\n          autoSize={{ minRows: 2 }}\r\n        />\r\n      </Form.Item>\r\n      <Form.Item label=\"台本\" name=\"script\">\r\n        <TextArea placeholder=\"没有台本则不填\" autoSize={{ minRows: 2 }} />\r\n      </Form.Item>\r\n      <Form.Item label=\"时间\" name=\"editAt\">\r\n        <DatePicker showTime onChange={handleDateChange} />\r\n      </Form.Item>\r\n      <Form.Item {...tailLayout}>\r\n        <Button type=\"primary\" htmlType=\"submit\" loading={isOperating} block>\r\n          {isEditMode ? \"更新作品\" : \"新增作品\"}\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { tags, authors, works } = state;\r\n  return { tags, authors, works };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  addTags,\r\n  checkWorkExists,\r\n  addWork,\r\n  updateWork,\r\n  addAuthors,\r\n})(AddWork);\r\n","import {\r\n  FETCH_TAGS,\r\n  FETCH_TAGS_FAIL,\r\n  FETCH_TAGS_DONE,\r\n  ADD_TAGS,\r\n  ADD_TAGS_DONE,\r\n  ADD_TAGS_FAIL,\r\n  REMOVE_TAG,\r\n  REMOVE_TAG_DONE,\r\n  REMOVE_TAG_FAIL,\r\n} from \"store/tags/tags.actionTypes\";\r\nimport { tagsRef, deleteField } from \"api\";\r\n\r\n// tags 标签\r\nexport const fetchTags = () => async (dispatch) => {\r\n  dispatch({\r\n    type: FETCH_TAGS,\r\n    payload: {\r\n      isFetching: true,\r\n      error: null,\r\n    },\r\n  });\r\n\r\n  try {\r\n    const tagsDoc = await tagsRef.doc(\"all\").get();\r\n    const tagItems = tagsDoc.data();\r\n    dispatch({\r\n      type: FETCH_TAGS_DONE,\r\n      payload: {\r\n        isFetching: false,\r\n        error: null,\r\n        tagItems,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: FETCH_TAGS_FAIL,\r\n      payload: {\r\n        isFetching: false,\r\n        error,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\nexport const addTags = (tags) => async (dispatch) => {\r\n  dispatch({\r\n    type: ADD_TAGS,\r\n    payload: { error: null },\r\n  });\r\n\r\n  try {\r\n    const data = {};\r\n    tags.forEach((tag) => (data[tag] = tag));\r\n    await tagsRef.doc(\"all\").set(data, { merge: true });\r\n\r\n    dispatch({\r\n      type: ADD_TAGS_DONE,\r\n      payload: { tags: data },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ADD_TAGS_FAIL,\r\n      payload: { error },\r\n    });\r\n  }\r\n};\r\n\r\nexport const removeTag = (tag) => async (dispatch) => {\r\n  dispatch({\r\n    type: REMOVE_TAG,\r\n    payload: {},\r\n  });\r\n\r\n  try {\r\n    await tagsRef.doc(\"all\").update({ [tag]: deleteField() });\r\n    dispatch({\r\n      type: REMOVE_TAG_DONE,\r\n      payload: { tag },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: REMOVE_TAG_FAIL,\r\n      payload: { error },\r\n    });\r\n  }\r\n};\r\n","// 增加标签 单个或者多个\r\nexport const ADD_TAGS = \"ADD_TAGS\";\r\nexport const ADD_TAGS_DONE = \"ADD_TAGS_DONE\";\r\nexport const ADD_TAGS_FAIL = \"ADD_TAGS_FAIL\";\r\n\r\n// 更新标签\r\nexport const UPDATE_TAGS = \"UPDATE_TAGS\";\r\nexport const UPDATE_TAGS_FAIL = \"UPDATE_TAGS_FAIL\";\r\nexport const UPDATE_TAGS_DONE = \"UPDATE_TAGS_DONE\";\r\n\r\n// 删除标签\r\nexport const REMOVE_TAG = \"REMOVE_TAG\";\r\nexport const REMOVE_TAG_DONE = \"REMOVE_TAG_DONE\";\r\nexport const REMOVE_TAG_FAIL = \"REMOVE_TAG_FAIL\";\r\n\r\n// 获取标签\r\nexport const FETCH_TAGS = \"FETCH_TAGS\";\r\nexport const FETCH_TAGS_DONE = \"FETCH_TAGS_DONE\";\r\nexport const FETCH_TAGS_FAIL = \"FETCH_TAGS_FAIL\";","import {\r\n  FETCH_WORKS,\r\n  FETCH_WORKS_FAIL,\r\n  FETCH_WORKS_DONE,\r\n  ADD_WORK,\r\n  ADD_WORK_DONE,\r\n  ADD_WORK_FAIL,\r\n  UPDATE_WORK,\r\n  UPDATE_WORK_FAIL,\r\n  UPDATE_WORK_DONE,\r\n  CHECK_WORK_EXISTS,\r\n} from \"store/works/works.actionTypes\";\r\nimport { worksRef } from \"api\";\r\n\r\n// 检查某个作品是否已经存在\r\nexport const checkWorkExists = (work) => async (dispatch) => {\r\n  let exists = false;\r\n  let emptys = [];\r\n  const { rj, title } = work;\r\n\r\n  if (rj) {\r\n    emptys = await Promise.all([\r\n      (await worksRef.where(\"rj\", \"==\", rj).get()).empty,\r\n      (await worksRef.where(\"title\", \"==\", title).get()).empty,\r\n    ]);\r\n  } else {\r\n    emptys = [(await worksRef.where(\"title\", \"==\", title).get()).empty];\r\n  }\r\n\r\n  emptys.forEach((empty) => {\r\n    if (!empty) exists = true;\r\n  });\r\n\r\n  dispatch({\r\n    type: CHECK_WORK_EXISTS,\r\n    payload: { exists },\r\n  });\r\n  return exists;\r\n};\r\n\r\n// works 作品\r\nexport const fetchWorks = () => async (dispatch) => {\r\n  dispatch({\r\n    type: FETCH_WORKS,\r\n    payload: {\r\n      isFetching: true,\r\n      error: null,\r\n    },\r\n  });\r\n\r\n  try {\r\n    const querySnapshot = await worksRef.orderBy(\"editAt\", \"desc\").get();\r\n    const items = querySnapshot.docs.map((doc) => ({\r\n      ...doc.data(),\r\n      id: doc.id,\r\n    }));\r\n    dispatch({\r\n      type: FETCH_WORKS_DONE,\r\n      payload: {\r\n        isFetching: false,\r\n        error: null,\r\n        items,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: FETCH_WORKS_FAIL,\r\n      payload: { isFetching: false, error },\r\n    });\r\n  }\r\n};\r\n\r\nexport const addWork = (work) => async (dispatch) => {\r\n  dispatch({\r\n    type: ADD_WORK,\r\n    payload: { error: null, isOperating: true },\r\n  });\r\n  try {\r\n    const doc = worksRef.doc();\r\n    const workData = { ...work, id: doc.id };\r\n    await doc.set(workData);\r\n    dispatch({\r\n      type: ADD_WORK_DONE,\r\n      payload: { work: workData, isOperating: false },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ADD_WORK_FAIL,\r\n      payload: { isOperating: false, error },\r\n    });\r\n  }\r\n};\r\nexport const updateWork = (work) => async (dispatch) => {\r\n  dispatch({\r\n    type: UPDATE_WORK,\r\n    payload: { error: null, isOperating: true },\r\n  });\r\n  try {\r\n    console.log(work.id, work);\r\n    await worksRef.doc(work.id).set(work, { merge: true });\r\n    dispatch({\r\n      type: UPDATE_WORK_DONE,\r\n      payload: { work, isOperating: false },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: UPDATE_WORK_FAIL,\r\n      payload: { error, isOperating: false },\r\n    });\r\n  }\r\n};\r\n","// 获取作品\r\nexport const FETCH_WORKS = \"FETCH_WORKS\";\r\nexport const FETCH_WORKS_DONE = \"FETCH_WORKS_DONE\";\r\nexport const FETCH_WORKS_FAIL = \"FETCH_WORKS_FAIL\";\r\n\r\n// 获取更多作品\r\nexport const FETCH_MORE_WORKS = \"FETCH_MORE_WORKS\";\r\nexport const FETCH_MORE_WORKS_DONE = \"FETCH_MORE_WORKS_DONE\";\r\nexport const FETCH_MORE_WORKS_FAIL = \"FETCH_MORE_WORKS_FAIL\";\r\n\r\n// 全部作品已加载\r\nexport const ALL_WORKS_LOADED = \"ALL_WORKS_LOADED\";\r\n\r\n// 校验作品是否已存在\r\nexport const CHECK_WORK_EXISTS = \"CHECK_WORK_EXISTS\";\r\n\r\n// 增加作品 单个\r\nexport const ADD_WORK = \"ADD_WORK\";\r\nexport const ADD_WORK_DONE = \"ADD_WORK_DONE\";\r\nexport const ADD_WORK_FAIL = \"ADD_WORK_FAIL\";\r\n\r\n// 更新作品\r\nexport const UPDATE_WORK = \"UPDATE_WORK\";\r\nexport const UPDATE_WORK_FAIL = \"UPDATE_WORK_FAIL\";\r\nexport const UPDATE_WORK_DONE = \"UPDATE_WORK_DONE\";\r\n","// 评论列表\r\nimport React from \"react\";\r\nimport { Comment, List, Tooltip } from \"antd\";\r\nimport moment from \"moment\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst CommentList = ({ commentList }) => {\r\n  return (\r\n    <List\r\n      dataSource={commentList}\r\n      itemLayout=\"horizontal\"\r\n      renderItem={(item) => (\r\n        <Comment\r\n          author={item.author}\r\n          content={item.content}\r\n          datetime={\r\n            <Tooltip title={item.datetime}>\r\n              <span>\r\n                {moment(item.datetime, \"YYYY-MM-DD HH:mm:ss\").fromNow()}\r\n              </span>\r\n            </Tooltip>\r\n          }\r\n        />\r\n      )}\r\n    />\r\n  );\r\n};\r\n\r\nCommentList.propTypes = {\r\n  commentList: PropTypes.array,\r\n};\r\n\r\nexport default CommentList;\r\n","// 评论编辑器\r\nimport React from \"react\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport moment from \"moment\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst { TextArea } = Input;\r\n\r\n// workId 为该评论所属作品的 id\r\nconst CommentEditor = ({ workId, author, commitComment, isSubmitting }) => {\r\n  const onFinish = ({ comment }) => {\r\n    console.log(comment);\r\n    const commentData = {\r\n      content: comment,\r\n      datetime: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\r\n      author,\r\n      workId,\r\n    };\r\n    console.log(\"comment to commit:\", commentData);\r\n    commitComment(commentData);\r\n  };\r\n\r\n  return (\r\n    <Form name=\"comment-editor\" onFinish={onFinish}>\r\n      <Form.Item\r\n        name=\"comment\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"请输入评论\",\r\n          },\r\n          {\r\n            whitespace: true,\r\n            message: \"评论不能为空字符\",\r\n          },\r\n        ]}\r\n      >\r\n        <TextArea autoSize={{ minRows: 2, maxRows: 6 }} allowClear />\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <Button htmlType=\"submit\" loading={isSubmitting} type=\"primary\">\r\n          发布评论\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n\r\nCommentEditor.propTypes = {\r\n  workId: PropTypes.string.isRequired,\r\n  author: PropTypes.string.isRequired,\r\n  commitComment: PropTypes.func.isRequired,\r\n  isSubmitting: PropTypes.bool,\r\n};\r\n\r\nexport default CommentEditor;\r\n","// 评论组件，包含评论列表、评论编辑器\r\nimport React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport CommentList from \"components/CommentList\";\r\nimport CommentEditor from \"components/CommentEditor\";\r\nimport {\r\n  addComment,\r\n  fetchCommentsByWork,\r\n} from \"store/comments/comments.actions\";\r\n\r\nconst getComments = (comments) => {\r\n  const commentItems = Object.keys(comments.commentItems).map(\r\n    (key) => comments.commentItems[key]\r\n  );\r\n  return { ...comments, commentItems };\r\n};\r\n\r\nconst Comments = ({\r\n  workId,\r\n  auth,\r\n  comments,\r\n  addComment,\r\n  fetchCommentsByWork,\r\n}) => {\r\n  const {\r\n    currentUser: { email },\r\n  } = auth;\r\n  // 截取邮箱前缀用作用户名\r\n  const author = email.split(\"@\")[0];\r\n\r\n  useEffect(() => {\r\n    fetchCommentsByWork(workId);\r\n  }, [workId, fetchCommentsByWork]);\r\n\r\n  return (\r\n    <div>\r\n      <CommentList commentList={comments.commentItems} />\r\n      <CommentEditor\r\n        workId={workId}\r\n        author={author}\r\n        commitComment={addComment}\r\n        isSubmitting={comments.isSubmitting}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nComments.propTypes = {\r\n  workId: PropTypes.string.isRequired,\r\n  auth: PropTypes.shape({\r\n    currentUser: PropTypes.object,\r\n  }),\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { auth, comments } = state;\r\n  return {\r\n    auth,\r\n    comments: getComments(comments),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { addComment, fetchCommentsByWork })(\r\n  Comments\r\n);\r\n","import { commentsRef } from \"api\";\r\nimport {\r\n  ADD_COMMENT,\r\n  ADD_COMMENT_DONE,\r\n  ADD_COMMENT_FAILED,\r\n  FETCH_COMMENTS_BY_WORK,\r\n  FETCH_COMMENTS_BY_WORK_DONE,\r\n  FETCH_COMMENTS_BY_WORK_FAILED,\r\n} from \"store/comments/comments.actionTypes\";\r\n\r\nexport const addComment = (comment) => async (dispatch) => {\r\n  dispatch({\r\n    type: ADD_COMMENT,\r\n    payload: { error: null, isSubmitting: true },\r\n  });\r\n\r\n  try {\r\n    const doc = commentsRef.doc();\r\n    const newComment = { ...comment, id: doc.id };\r\n    await doc.set(newComment, { merge: true });\r\n    dispatch({\r\n      type: ADD_COMMENT_DONE,\r\n      payload: { error: null, isSubmitting: false, newComment },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ADD_COMMENT_FAILED,\r\n      payload: { isSubmitting: false, error },\r\n    });\r\n  }\r\n};\r\n\r\n// 获取某个作品下面的所有评论\r\nexport const fetchCommentsByWork = (workId) => async (dispatch) => {\r\n  dispatch({\r\n    type: FETCH_COMMENTS_BY_WORK,\r\n    payload: { error: null, isFetching: true },\r\n  });\r\n\r\n  try {\r\n    const comments = {};\r\n    const querySnapshot = await commentsRef.where(\"workId\", \"==\", workId).get();\r\n    querySnapshot.forEach((doc) => (comments[doc.id] = doc.data()));\r\n    console.log(\"comments\", comments);\r\n\r\n    dispatch({\r\n      type: FETCH_COMMENTS_BY_WORK_DONE,\r\n      payload: { error: null, isFetching: false, comments },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: FETCH_COMMENTS_BY_WORK_FAILED,\r\n      payload: { error },\r\n    });\r\n  }\r\n};\r\n","// 对某个作品的评论\r\n\r\n// 新增或者编辑一条评论\r\nexport const ADD_COMMENT = \"ADD_COMMENT\";\r\nexport const ADD_COMMENT_FAILED = \"ADD_COMMENT_FAILED\";\r\nexport const ADD_COMMENT_DONE = \"ADD_COMMENT_DONE\";\r\n\r\n// 获取某个作品下的评论\r\nexport const FETCH_COMMENTS_BY_WORK = \"FETCH_COMMENTS_BY_WORK\";\r\nexport const FETCH_COMMENTS_BY_WORK_FAILED = \"FETCH_COMMENTS_BY_WORK_FAILED\";\r\nexport const FETCH_COMMENTS_BY_WORK_DONE = \"FETCH_COMMENTS_BY_WORK_DONE\";\r\n","// 作品详情组件\r\n// 每个作品的数据结构如下\r\nimport React from \"react\";\r\nimport { useLocation, Link } from \"react-router-dom\";\r\nimport { Typography, Rate, Tag, Row, Col } from \"antd\";\r\nimport { EditOutlined } from \"@ant-design/icons\";\r\nimport { ADD_WORK } from \"myConstants/routes\";\r\nimport Comments from \"components/Comments\";\r\nimport styles from \"./index.module.css\";\r\n\r\nconst { Title, Paragraph } = Typography;\r\n\r\nconst imagePlaceholder =\r\n  \"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png\";\r\n\r\nconst Work = () => {\r\n  const location = useLocation();\r\n  const work = location.state;\r\n  return (\r\n    <div>\r\n      <Row gutter={[32, 32]} align=\"middle\">\r\n        <Col>\r\n          <div>\r\n            <img\r\n              className={styles.cover}\r\n              src={work.imageSrc || imagePlaceholder}\r\n              alt={work.title}\r\n            />\r\n          </div>\r\n        </Col>\r\n        <Col flex=\"450px\">\r\n          <Title level={3}>{work.title}</Title>\r\n          <Paragraph>\r\n            作者：\r\n            {work.author.map((author) => (\r\n              <Tag color=\"purple\" key={author} className={styles.tag}>\r\n                {author}\r\n              </Tag>\r\n            ))}\r\n          </Paragraph>\r\n          <Paragraph>分级：{work.rating}</Paragraph>\r\n          <Paragraph>语言：{work.language}</Paragraph>\r\n          <Paragraph>描述：{work.description}</Paragraph>\r\n          <Paragraph>拥有：{work.hasGot ? \"是\" : \"否\"}</Paragraph>\r\n          <Paragraph>\r\n            链接：\r\n            <a href={work.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              {work.url && \"访问外链\"}\r\n            </a>\r\n          </Paragraph>\r\n          <Paragraph>编号：{work.rj}</Paragraph>\r\n          <Paragraph>\r\n            标签：\r\n            {work.tags.map((tag) => (\r\n              <Tag key={tag} color=\"geekblue\" className={styles.tag}>\r\n                {tag}\r\n              </Tag>\r\n            ))}\r\n          </Paragraph>\r\n          <Paragraph>\r\n            评分： <Rate defaultValue={work.star} />\r\n          </Paragraph>\r\n        </Col>\r\n      </Row>\r\n      <Row gutter={[32, 32]}>\r\n        <Col span={14}>\r\n          <Title level={4}>台本</Title>\r\n          <Paragraph>\r\n            <pre className={styles.script}>{work.script}</pre>\r\n          </Paragraph>\r\n        </Col>\r\n        <Col span={10}>\r\n          <Row gutter={[80, 80]}>\r\n            <Col span={24}>\r\n              <Title level={4}>信息</Title>\r\n              <Paragraph>\r\n                <pre className={styles.info}>{work.info}</pre>\r\n              </Paragraph>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col span={24}>\r\n              <Title level={4}>评论</Title>\r\n              <Comments workId={work.id} />\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n      <Row gutter={[32, 32]}>\r\n        <Col span={4}>\r\n          <Link to={{ pathname: ADD_WORK, state: work }}>\r\n            <EditOutlined /> 编辑\r\n          </Link>\r\n        </Col>\r\n        <Col span={8}>\r\n          <span>更新时间：{work.editAt}</span>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Work;\r\n","// 主页\r\nimport React from \"react\";\r\nimport { Typography } from \"antd\";\r\n\r\nconst { Paragraph } = Typography;\r\n\r\nconst Home = () => (\r\n  <div>\r\n    <Paragraph>蝉鸣</Paragraph>\r\n    <Paragraph>海浪拍打沙滩</Paragraph>\r\n    <Paragraph>风吹过树叶沙沙作响</Paragraph>\r\n    <Paragraph>雨滴落下</Paragraph>\r\n    <Paragraph>木头燃烧时发出的噼里啪啦声音</Paragraph>\r\n    <Paragraph>船桨划过水面，荡起涟漪发出的声音</Paragraph>\r\n  </div>\r\n);\r\n\r\nexport default Home;\r\n","// 作品过滤器组件\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Select, Space, Input, Button, Radio } from \"antd\";\r\nimport { setVisibilityFilter } from \"store/visibilityFilter/visibilityFilter.actions\";\r\nimport { LANGUAGES, AGE_RATING } from \"myConstants\";\r\n\r\nconst { Option } = Select;\r\nconst { Search } = Input;\r\n\r\nconst VisibilityFilter = ({ tags, authors, setVisibilityFilter }) => {\r\n  const { authorItems } = authors;\r\n  const { tagItems } = tags;\r\n  const authorList = Object.keys(authorItems);\r\n  const tagList = Object.keys(tagItems);\r\n\r\n  const onAuthorChange = (author) => {\r\n    console.log(\"on change\", author);\r\n    setVisibilityFilter({ author });\r\n  };\r\n\r\n  const onTagChange = (tag) => {\r\n    console.log(\"on change\", tag);\r\n    setVisibilityFilter({ tag });\r\n  };\r\n\r\n  const onLanguageChange = (language) => {\r\n    setVisibilityFilter({ language });\r\n  };\r\n\r\n  const onRatingChange = (rating) => {\r\n    setVisibilityFilter({ rating });\r\n  };\r\n\r\n  const onRJSearch = (rj) => {\r\n    setVisibilityFilter({ rj });\r\n  };\r\n\r\n  const onTitleSearch = (title) => {\r\n    setVisibilityFilter({ title });\r\n  };\r\n\r\n  const onToggleScript = (e) => {\r\n    setVisibilityFilter({ onlyShowWorksWithScript: e.target.value });\r\n  };\r\n\r\n  const onClearFilter = () => {\r\n    setVisibilityFilter({\r\n      author: null,\r\n      tag: null,\r\n      language: null,\r\n      rating: null,\r\n      rj: null,\r\n      title: null,\r\n      onlyShowWorksWithScript: false,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Space direction=\"vertical\" size=\"large\" style={{ position: \"fixed\" }}>\r\n      <Select\r\n        allowClear\r\n        showSearch\r\n        placeholder=\"作者\"\r\n        style={{ width: 200 }}\r\n        onChange={onAuthorChange}\r\n        loading={authorItems.isFetching}\r\n      >\r\n        {authorList.map((author) => (\r\n          <Option key={author}>{author}</Option>\r\n        ))}\r\n      </Select>\r\n      <Select\r\n        allowClear\r\n        showSearch\r\n        placeholder=\"标签\"\r\n        style={{ width: 200 }}\r\n        onChange={onTagChange}\r\n        loading={tagItems.isFetching}\r\n      >\r\n        {tagList.map((tag) => (\r\n          <Option key={tag}>{tag}</Option>\r\n        ))}\r\n      </Select>\r\n      <Select\r\n        allowClear\r\n        showSearch\r\n        placeholder=\"语言\"\r\n        style={{ width: 200 }}\r\n        onChange={onLanguageChange}\r\n      >\r\n        {LANGUAGES.map((tag) => (\r\n          <Option key={tag}>{tag}</Option>\r\n        ))}\r\n      </Select>\r\n      <Select\r\n        allowClear\r\n        showSearch\r\n        placeholder=\"年龄分级\"\r\n        style={{ width: 200 }}\r\n        onChange={onRatingChange}\r\n      >\r\n        {AGE_RATING.map((tag) => (\r\n          <Option key={tag}>{tag}</Option>\r\n        ))}\r\n      </Select>\r\n      <Radio.Group onChange={onToggleScript} defaultValue={false}>\r\n        <Radio value={true}>有脚本</Radio>\r\n        <Radio value={false}>全部</Radio>\r\n      </Radio.Group>\r\n      <Search placeholder=\"RJ\" onSearch={onRJSearch} enterButton allowClear />\r\n      <Search\r\n        placeholder=\"Title\"\r\n        onSearch={onTitleSearch}\r\n        enterButton\r\n        allowClear\r\n      />\r\n      <Button onClick={onClearFilter}>清空过滤</Button>\r\n    </Space>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { tags, authors } = state;\r\n  return {\r\n    tags,\r\n    authors,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  setVisibilityFilter,\r\n})(VisibilityFilter);\r\n","import { SET_VISIBILITY_FILTER } from \"store/visibilityFilter/visibilityFilter.actionTypes\";\r\n\r\n// 作品过滤器\r\nexport const setVisibilityFilter = (filter) => async (dispatch) => {\r\n  dispatch({\r\n    type: SET_VISIBILITY_FILTER,\r\n    payload: {\r\n      filter,\r\n    },\r\n  });\r\n};\r\n","// 设置作品过滤器\r\nexport const SET_VISIBILITY_FILTER = \"SET_VISIBILITY_FILTER\";","// 作品列表组件\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport { List, Typography, Tag } from \"antd\";\r\nimport { AUTHORS_PAGE } from \"myConstants/routes\";\r\n\r\nconst { Paragraph } = Typography;\r\n\r\n// 占位图片\r\nconst imagePlaceholder =\r\n  \"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png\";\r\n\r\nconst WorkList = ({ items }) => {\r\n  return (\r\n    <List\r\n      itemLayout=\"vertical\"\r\n      style={{ maxWidth: 750 }}\r\n      pagination={{\r\n        defaultPageSize: 50,\r\n      }}\r\n      dataSource={items}\r\n      footer={<div>一共 {items.length} 个作品</div>}\r\n      renderItem={(item) => (\r\n        <List.Item\r\n          key={item.title}\r\n          extra={\r\n            <img\r\n              width={280}\r\n              alt=\"logo\"\r\n              src={item.imageSrc || imagePlaceholder}\r\n            />\r\n          }\r\n        >\r\n          <List.Item.Meta\r\n            title={\r\n              <Link\r\n                to={{\r\n                  pathname: \"/work\",\r\n                  hash: `#${item.title}`,\r\n                  state: item,\r\n                }}\r\n              >\r\n                {item.title}\r\n              </Link>\r\n            }\r\n            description={`${item.language}  ${item.rating}  ${\r\n              item.rj ? item.rj : \"\"\r\n            }`}\r\n          />\r\n          <div>\r\n            {item.author.map((author) => (\r\n              <Link\r\n                key={author}\r\n                to={{\r\n                  pathname: AUTHORS_PAGE,\r\n                  state: { author },\r\n                  hash: author,\r\n                }}\r\n                style={{\r\n                  margin: \"0 4px 4px 0\",\r\n                }}\r\n              >\r\n                {author}\r\n              </Link>\r\n            ))}\r\n            <Paragraph>{item.description}</Paragraph>\r\n            <div>\r\n              {item.tags.map((tag) => (\r\n                <Tag className=\"tag\" key={tag}>\r\n                  {tag}\r\n                </Tag>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </List.Item>\r\n      )}\r\n    />\r\n  );\r\n};\r\n\r\nWorkList.propTypes = {\r\n  items: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n};\r\n\r\nexport default WorkList;\r\n","// 所有的作品\r\nimport React from \"react\";\r\nimport { Spin, Row, Col } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport VisibilityFilter from \"components/VisibilityFilter\";\r\nimport WorkList from \"components/WorkList\";\r\n\r\nconst getVisibleWorks = (works, filter) => {\r\n  console.count(\"getVisibleWorks\");\r\n  const { items } = works;\r\n  const {\r\n    author,\r\n    tag,\r\n    language,\r\n    rating,\r\n    rj,\r\n    title,\r\n    onlyShowWorksWithScript,\r\n  } = filter;\r\n\r\n  const filteredItems = items.filter((item) => {\r\n    const isMatchAuthor = !author || item.author.includes(author);\r\n    const isMatchTag =\r\n      !tag ||\r\n      item.tags.map((tag) => tag.toLowerCase()).includes(tag.toLowerCase());\r\n    const isMatchLanguage = !language || item.language.includes(language);\r\n    const isMatchRating = !rating || item.rating === rating;\r\n    const isMatchRj = !rj || (item.rj && item.rj.includes(rj));\r\n    const isMatchTitle =\r\n      !title || item.title.toLowerCase().includes(title.toLowerCase());\r\n    const isMatchHasScript = onlyShowWorksWithScript ? item.script : true;\r\n    return (\r\n      isMatchAuthor &&\r\n      isMatchTag &&\r\n      isMatchLanguage &&\r\n      isMatchRating &&\r\n      isMatchRj &&\r\n      isMatchTitle &&\r\n      isMatchHasScript\r\n    );\r\n  });\r\n\r\n  return { ...works, items: filteredItems };\r\n};\r\n\r\nconst WorksPage = ({ works }) => {\r\n  const { isFetching, items } = works;\r\n\r\n  return (\r\n    <Row gutter={[32, 32]}>\r\n      <Col span={18}>\r\n        {isFetching && <Spin delay={1000} />}\r\n        <WorkList items={items} />\r\n      </Col>\r\n      <Col span={6}>\r\n        <VisibilityFilter />\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { works, visibilityFilter } = state;\r\n  return {\r\n    works: getVisibleWorks(works, visibilityFilter),\r\n    visibilityFilter,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(WorksPage);\r\n","// 详细展示艺术家信息的组件\r\nimport React from \"react\";\r\nimport { Typography, Avatar } from \"antd\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useTransition, animated, config } from \"react-spring\";\r\nimport { ExportOutlined, EditOutlined } from \"@ant-design/icons\";\r\nimport styles from \"./index.module.css\";\r\nimport { ADD_AUTHOR } from \"myConstants/routes\";\r\n\r\nconst { Title, Text, Paragraph } = Typography;\r\n\r\nconst AuthorProfile = ({ profile }) => {\r\n  const transitions = useTransition(profile, (profile) => profile.name, {\r\n    from: {\r\n      position: \"absolute\",\r\n      opacity: 0,\r\n      transform: \"translate3d(200px,0,0)\",\r\n    },\r\n    enter: { opacity: 1, transform: \"translate3d(0,0,0)\" },\r\n    leave: { opacity: 1, transform: \"translate3d(0px,0,0)\" },\r\n    config: config.gentle,\r\n  });\r\n\r\n  return transitions.map(({ item, key, props }) => (\r\n    <animated.div key={key} style={props} className={styles.profile}>\r\n      <div className={styles.header}>\r\n        <Avatar src={profile.avatar} size={288} />\r\n        <div className={styles.bio}>\r\n          <Title>{profile.name}</Title>\r\n          <Text type=\"secondary\">{profile.bio}</Text>\r\n          <span>\r\n            {profile.url && (\r\n              <a href={profile.url}>\r\n                <ExportOutlined /> 她的主页\r\n              </a>\r\n            )}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <Paragraph title=\"问候\">{profile.greetings}</Paragraph>\r\n      <Paragraph title=\"评价\">\r\n        <pre>{profile.evaluation}</pre>\r\n      </Paragraph>\r\n      <Link to={{ pathname: ADD_AUTHOR, state: profile }}>\r\n        <EditOutlined /> 编辑\r\n      </Link>\r\n    </animated.div>\r\n  ));\r\n};\r\n\r\nexport default AuthorProfile;\r\n","// 所有作者\r\nimport React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Spin, Row, Col, Button, Skeleton, Avatar } from \"antd\";\r\nimport { UserOutlined } from \"@ant-design/icons\";\r\nimport AuthorProfile from \"components/AuthorProfile\";\r\n\r\nconst AuthorsPage = ({ authors, authorProfile }) => {\r\n  const history = useHistory();\r\n\r\n  const { authorItems } = authors;\r\n  const { profiles } = authorProfile;\r\n\r\n  const [currentAuthor, setCurrentAuthor] = useState(\r\n    (history.location.state && history.location.state.author) || \"\"\r\n  );\r\n\r\n  const authorList = Object.keys(authorItems);\r\n\r\n  const profile = profiles && profiles[currentAuthor];\r\n\r\n  return (\r\n    <Row gutter={[48, 48]}>\r\n      <Col span={16}>\r\n        {authorProfile.isfetching && <Spin />}\r\n        {profile ? (\r\n          <AuthorProfile profile={profile} />\r\n        ) : (\r\n          <Skeleton avatar>\r\n            <Avatar icon={<UserOutlined />} />\r\n            <div>这位艺术家还没有档案^_^</div>\r\n          </Skeleton>\r\n        )}\r\n      </Col>\r\n      <Col span={8}>\r\n        {authors.isfetching && <Spin />}\r\n        {authorList.map((author) => (\r\n          <Button\r\n            key={author}\r\n            shape=\"round\"\r\n            onClick={() => setCurrentAuthor(author)}\r\n          >\r\n            {author}\r\n          </Button>\r\n        ))}\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { authors, authorProfile } = state;\r\n  return { authors, authorProfile };\r\n};\r\n\r\nexport default connect(mapStateToProps)(AuthorsPage);\r\n","// 所有作品的标签汇总\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Spin, Tag } from \"antd\";\r\n\r\nconst TagsPage = ({ tags, fetchTags }) => {\r\n  const { isFetching, tagItems } = tags;\r\n\r\n  return (\r\n    <div>\r\n      <div>{isFetching && <Spin size=\"large\" delay={500} />}</div>\r\n      <div>\r\n        {Object.keys(tagItems).map((tag) => (\r\n          <Tag color=\"geekblue\" style={{ margin: 6 }} key={tag}>\r\n            {tag}\r\n          </Tag>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { tags } = state;\r\n  return { tags };\r\n};\r\n\r\nexport default connect(mapStateToProps)(TagsPage);\r\n","import React from \"react\";\r\nimport { Row, Col, Typography } from \"antd\";\r\n\r\nconst { Paragraph, Title } = Typography;\r\n\r\nconst FaqPage = () => {\r\n  return (\r\n    <Row>\r\n      <Col span={18} offset={3}>\r\n        <Title level={4}>What is ASMR</Title>\r\n        <Paragraph>\r\n          ASMR 的全称是 Autonomous Sensory Meridian Response.\r\n          总体来讲，就是让你感到身心愉悦的声音。比如轻柔的耳语，西藏钵发出的绵长悠远的声音，芦荟胶的声音，跳跳糖的声音，舔耳时舌苔摩擦耳廓的声音，海浪拍打沙滩的声音。\r\n        </Paragraph>\r\n        <Title level={4}>What is Gone Wild Audio</Title>\r\n        <Paragraph>\r\n          通常用来指代软色情的英文音频。其中有一些由网友约定俗成的标签，它们的大概意思如下：\r\n        </Paragraph>\r\n        <Paragraph>F4M: female for male 作者是女性，目标观众是男性</Paragraph>\r\n        <Paragraph>\r\n          F4A: female for all 作者是女性，目标观众是男性或女性\r\n        </Paragraph>\r\n        <Paragraph>HFO: Hand Free Orgasm</Paragraph>\r\n        <Paragraph>GFE: Girl Friend Emulation</Paragraph>\r\n        <Paragraph>Fdom: Female Dominate 即女性扮演主导角色</Paragraph>\r\n        <Paragraph>Femdom: Female Dominate 即女性扮演主导角色</Paragraph>\r\n        <Paragraph>Fsub: Female Submissive 即女性扮演顺从角色</Paragraph>\r\n        <Paragraph>Femsub: Female Submissive 即女性扮演顺从角色</Paragraph>\r\n        <Paragraph>Creampie: 内射，体内射精</Paragraph>\r\n        <Paragraph>Milf: 熟女</Paragraph>\r\n        <Paragraph>Handjob: 手交</Paragraph>\r\n        <Paragraph>Blowjob: 口交</Paragraph>\r\n        <Paragraph>Titjob: 乳交</Paragraph>\r\n        <Paragraph>SPank: 拍打屁股</Paragraph>\r\n        <Paragraph>Prostate play: 前列腺调教</Paragraph>\r\n        <Paragraph>Nipple play: 乳头调教</Paragraph>\r\n        <Paragraph>Dirty Talk: 淫语</Paragraph>\r\n        <Paragraph>\r\n          JOI: Jerk Off Instruction 自慰指令，或者说射精管理\r\n        </Paragraph>\r\n        <Title level={4}>音频来源于哪些平台</Title>\r\n        <Paragraph>\r\n          <a href=\"https://www.youtube.com/\">Youtube</a> 上面有非常多的 ASMR\r\n          内容的视频，语言以英文为主。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://www.reddit.com/\">Reddit</a>{\" \"}\r\n          一个神奇的网站，里面有不计其数的主题，涵盖了广泛的信息分支和兴趣。其中的\r\n          GoneWildAudio 是指软色情音频，这里是不少音频的发源地。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://www.reddup.co/\">Reddup</a> 一个视觉更加现代、友好的\r\n          Reddit 第三方网站，信息展示比 Reddit 更加整洁，推荐使用这个。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://soundgasm.net/\">Soundgasm</a>{\" \"}\r\n          一个音频托管网站，上面提到的 GoneWildAudio\r\n          音频基本都托管在这个网站上。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://www.flaru.com/en/soundgasm.net/\">Flaru</a>{\" \"}\r\n          一个搜索网站，借助这个网站，可以搜索上面 Soundgasm\r\n          的作品，输入你喜欢的标签和作者进行搜素。 比如 \"asmr\",\"fsub\",\"dirty\r\n          talk\",\"belle_in_the_woods\"。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://pastebin.com/\">Pastebin</a> 不少 GoneWildAudio\r\n          的脚本都保存在这个网站上。使用音频的名字加上 \"site:pastebin\" 在 Google\r\n          上搜索，就可能获得某个音频的脚本。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://www.tryquinn.com/\">quinn</a> Snap\r\n          创始人的妹妹创建一个色情音频网站。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://audiomack.com/\">Audio Mack</a>\r\n          Audiomack\r\n          是国外一款分享英文电子音乐的音乐网站，其针对的是英文歌曲而并非是国内的，也算是小众类型。\r\n          但是 Audiomack 拥有无限制上传分享功能，也为 Audiomack\r\n          添加了无限的可能。没错，只要是你拥有的音频资源，均可以无限制分享上去，而且\r\n          Audiomack 也并没有诸如国内的严苛审核以及版权限制，因此 Audiomack\r\n          的自由也使得其内涵十足。 而当 Audiomack 被中国人发现，在 Audiomack\r\n          这个还没有被和谐的平台下，国人赋予了它新的生命\r\n          没错，周杰伦的所有歌曲，均可以在里面搜索到，并且在线收听和下载，一些国内版权歌曲，同样也被中国网友给上传进去。\r\n          开车是国人的精神，因此什么 18 禁的音声、步非烟、ASMR\r\n          等等开车音频资源，只要有人上传过，你均可以在里面搜索到，并且无限制收听。\r\n          当然，怎么找这些资源，是需要一些想象力和关键字储备的，并不困难。\r\n        </Paragraph>\r\n        <Title level={4}>国内资源网站</Title>\r\n        <Paragraph>\r\n          <a href=\"https://18asmr.org/\">18ASMR</a>{\" \"}\r\n          资源质量还不错，网站主人看来也是个 ASMR\r\n          爱好者。经常签到可以获取部分资源，某些福利资源需要充值成年度会员。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://eatasmr.com/\">eatasmr</a>{\" \"}\r\n          这个是做的比较用心的一个网站，收费上非常克制。签到、自己上传资源可以获得积分，积分可以用来获取资源。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://bbs.level-plus.net/thread.php?fid-128.html\">\r\n            南+ South Plus\r\n          </a>{\" \"}\r\n          也是一个资源共享型的网站，签到或者分享资源可以获取积分，资源非常多，主要是日语音声和中文音声。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://www.macgn.com/\">萌站</a> 一个 ACG\r\n          交流分享平台，包括游戏、漫画、动画、音声、电影、轻小说等。签到可以获得积分，积分可以用来获取资源。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://www.missahri.com/\">missahri</a>{\" \"}\r\n          这个网站一般，仅作备用。一是因为大部分资源是国内主播卖肉的所谓福利视频，其质量其实很低；二是这个网站大部分资源都是收费的，其实很多资源在其他地方都可以免费获取。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://www.okfree.men/\">自由男人网络硬盘</a>{\" \"}\r\n          国内大部分音声资源在这个网盘都可以找到，比如步非烟工作室的大部分作品。\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"http://www.xrmoo.com/\">闲人吧</a> 老司机教你如何开车。\r\n        </Paragraph>\r\n        <Title level={4}>野外资源常见的密码集锦</Title>\r\n        <Paragraph copyable>bdtrysb</Paragraph>\r\n        <Paragraph copyable>gmgard.us</Paragraph>\r\n        <Paragraph copyable>eatasmr.com</Paragraph>\r\n        <Paragraph copyable>missahri.live</Paragraph>\r\n        <Paragraph copyable>18asmr.com</Paragraph>\r\n        <Paragraph copyable>asmr18.com</Paragraph>\r\n        <Paragraph copyable>18asmr.org</Paragraph>\r\n        <Title level={4}>步非烟第一季 作品目录</Title>\r\n        <Paragraph>\r\n          <a href=\"https://www.missahri.com/audio/12137/\">\r\n            步非烟第一季全部224期ASMR中文音声\r\n          </a>\r\n        </Paragraph>\r\n        <Title level={4}>步非烟小小的菜单 作品目录</Title>\r\n        <Paragraph>\r\n          即步非烟工作室出品的第二季中文音声，有些口味清单的作品还可以，CV\r\n          个人比较喜欢小烟、绝色、小美、小琳。\r\n        </Paragraph>\r\n        <Title level={4}>Gone Wild Audio 脚本作者</Title>\r\n        <Paragraph>\r\n          <a href=\"https://pastebin.com/u/Zerahmot\">Zerahmot's Pastebin</a>\r\n        </Paragraph>\r\n        <Paragraph>\r\n          <a href=\"https://pastebin.com/u/RamblingKnight\">\r\n            RamblingKnight's Pastebin\r\n          </a>\r\n        </Paragraph>\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default FaqPage;\r\n","import React from \"react\";\r\nimport { Form, Input, Button, message, Upload } from \"antd\";\r\nimport { UploadOutlined } from \"@ant-design/icons\";\r\nimport {\r\n  addAuthorProfile,\r\n  uploadAvatar,\r\n} from \"store/authorProfile/authorProfile.acitons\";\r\nimport { addAuthors } from \"store/authors/authors.actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst formLayout = {\r\n  labelCol: {\r\n    span: 6,\r\n  },\r\n  wrapperCol: {\r\n    span: 12,\r\n  },\r\n};\r\n\r\nconst tailLayout = {\r\n  wrapperCol: {\r\n    span: 12,\r\n    offset: 6,\r\n  },\r\n};\r\n\r\nconst initialValues = {\r\n  name: null,\r\n  bio: null,\r\n  url: null,\r\n  greetings: null,\r\n  evaluation: null,\r\n  coverFlow: [],\r\n  representativeWorks: [],\r\n};\r\n\r\nconst AddAuthorProfile = ({\r\n  addAuthorProfile,\r\n  addAuthors,\r\n  uploadAvatar,\r\n  authorProfile,\r\n}) => {\r\n  // 上传头像得到的地址\r\n  const { downloadURL } = authorProfile;\r\n  const location = useLocation();\r\n  const [form] = Form.useForm();\r\n\r\n  const isEditMode = !!location.state;\r\n\r\n  isEditMode && form.setFieldsValue(location.state);\r\n\r\n  const onFinish = async (profile) => {\r\n    console.log(\"form data:\", profile);\r\n\r\n    const avatar = downloadURL\r\n      ? downloadURL\r\n      : isEditMode\r\n      ? location.state.avatar\r\n      : null;\r\n\r\n    // 提交到数据库的数据\r\n    const profileData = {\r\n      ...profile,\r\n      avatar,\r\n    };\r\n\r\n    console.log(\"profileData\", profileData);\r\n    await Promise.all([\r\n      addAuthorProfile(profileData),\r\n      addAuthors(profile.name),\r\n    ]);\r\n    message.success(isEditMode ? \"更新作者成功\" : \"添加作者成功\", 1);\r\n  };\r\n\r\n  const onReset = () => {\r\n    form.resetFields();\r\n  };\r\n\r\n  const beforeUpload = () => {};\r\n\r\n  const handleAvatarChange = (info) => {\r\n    if (info.file.status !== \"uploading\") {\r\n      console.log(info.file, info.fileList);\r\n    }\r\n    if (info.file.status === \"done\") {\r\n      message.success(`${info.file.name} 上传成功`);\r\n    } else if (info.file.status === \"error\") {\r\n      message.error(`${info.file.name} 上传失败.`);\r\n    }\r\n  };\r\n\r\n  // 自定义上传行为\r\n  // 使用 Firebase Storage 的接口\r\n  const uploadToStorage = async ({\r\n    onProgress,\r\n    onError,\r\n    onSuccess,\r\n    data,\r\n    filename,\r\n    file,\r\n    withCredentials,\r\n    action,\r\n    headers,\r\n  }) => {\r\n    console.log(\"file\", file);\r\n    try {\r\n      await uploadAvatar({ file, onProgress, onError, onSuccess });\r\n    } catch (error) {\r\n      onError(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Form\r\n        {...formLayout}\r\n        initialValues={initialValues}\r\n        form={form}\r\n        onFinish={onFinish}\r\n      >\r\n        <Form.Item\r\n          name=\"name\"\r\n          label=\"名字\"\r\n          rules={[{ required: true, message: \"请输入名字\" }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"上传\" valuePropName=\"fileList\">\r\n          <Upload\r\n            headers={{\r\n              authorization: \"authorization-text\",\r\n            }}\r\n            customRequest={uploadToStorage}\r\n            beforeUpload={beforeUpload}\r\n            onChange={handleAvatarChange}\r\n          >\r\n            <Button>\r\n              <UploadOutlined /> 点击上传\r\n            </Button>\r\n          </Upload>\r\n        </Form.Item>\r\n        <Form.Item name=\"url\" label=\"链接\">\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item name=\"greetings\" label=\"问候\">\r\n          <TextArea autoSize={{ minRows: 2, maxRows: 5 }} />\r\n        </Form.Item>\r\n        <Form.Item name=\"evaluation\" label=\"评价\">\r\n          <TextArea autoSize={{ minRows: 2 }} />\r\n        </Form.Item>\r\n        <Form.Item {...tailLayout}>\r\n          <Button htmlType=\"submit\" type=\"primary\" style={{ width: \"50%\" }}>\r\n            {isEditMode ? \"更新作者\" : \"添加作者\"}\r\n          </Button>\r\n          <Button htmlType=\"reset\" onClick={onReset} style={{ width: \"50%\" }}>\r\n            重置\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { authorProfile } = state;\r\n  return { authorProfile };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  addAuthorProfile,\r\n  addAuthors,\r\n  uploadAvatar,\r\n})(AddAuthorProfile);\r\n","// author profile 作者档案\r\nimport {\r\n  ADD_AUTHOR_PROFILE,\r\n  ADD_AUTHOR_PROFILE_DONE,\r\n  ADD_AUTHOR_PROFILE_FAIL,\r\n  FETCH_AUTHOR_PROFILES,\r\n  FETCH_AUTHOR_PROFILES_DONE,\r\n  FETCH_AUTHOR_PROFILES_FAIL,\r\n  UPLOAD_AVATAR,\r\n  UPLOAD_AVATAR_FAIL,\r\n  UPLOAD_AVATAR_DONE,\r\n} from \"store/authorProfile/authorProfile.actionTypes\";\r\nimport { authorsRef, storage, storageRef } from \"api\";\r\n\r\n// 新建或者编辑作者档案\r\nexport const addAuthorProfile = (profile) => async (dispatch) => {\r\n  dispatch({\r\n    type: ADD_AUTHOR_PROFILE,\r\n    payload: { error: null },\r\n  });\r\n\r\n  try {\r\n    await authorsRef.doc(`${profile.name}`).set(profile, { merge: true });\r\n    dispatch({\r\n      type: ADD_AUTHOR_PROFILE_DONE,\r\n      payload: { error: null, profile },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: ADD_AUTHOR_PROFILE_FAIL,\r\n      payload: { error },\r\n    });\r\n  }\r\n};\r\n\r\n// 获取所有作者档案\r\nexport const fetchAuthorProfiles = () => async (dispatch) => {\r\n  dispatch({\r\n    type: FETCH_AUTHOR_PROFILES,\r\n    payload: { isFetching: true, error: null },\r\n  });\r\n\r\n  try {\r\n    const profilesData = await authorsRef.get();\r\n    const profiles = {};\r\n    profilesData.forEach((doc) => {\r\n      const key = doc.data().name || \"all\";\r\n      profiles[key] = doc.data();\r\n    });\r\n    dispatch({\r\n      type: FETCH_AUTHOR_PROFILES_DONE,\r\n      payload: { isFetching: false, error: null, profiles },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: FETCH_AUTHOR_PROFILES_FAIL,\r\n      payload: { isFetching: false, error },\r\n    });\r\n  }\r\n};\r\n\r\n// 上传头像\r\nexport const uploadAvatar = ({\r\n  file,\r\n  onProgress,\r\n  onError,\r\n  onSuccess,\r\n}) => async (dispatch) => {\r\n  // Create the file metadata\r\n  const metadata = {\r\n    contentType: \"image/jpeg\",\r\n  };\r\n\r\n  // Upload file and metadata to the object 'images/mountains.jpg'\r\n  const uploadTask = storageRef\r\n    .child(\"images/\" + file.name)\r\n    .put(file, metadata);\r\n\r\n  // Listen for state changes, errors, and completion of the upload.\r\n  uploadTask.on(\r\n    storage.TaskEvent.STATE_CHANGED, // or 'state_changed'\r\n    function (snapshot) {\r\n      // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\r\n      const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n      onProgress({ precent: progress }, file);\r\n      console.log(\"Upload is \" + progress + \"% done\");\r\n      switch (snapshot.state) {\r\n        case storage.TaskState.PAUSED: // or 'paused'\r\n          console.log(\"Upload is paused\");\r\n          break;\r\n        case storage.TaskState.RUNNING: // or 'running'\r\n          console.log(\"Upload is running\");\r\n          dispatch({\r\n            type: UPLOAD_AVATAR,\r\n            payload: { progress },\r\n          });\r\n          break;\r\n        default:\r\n          dispatch({\r\n            type: UPLOAD_AVATAR,\r\n            payload: { progress },\r\n          });\r\n          return;\r\n      }\r\n    },\r\n    function (error) {\r\n      // A full list of error codes is available at\r\n      // https://firebase.google.com/docs/storage/web/handle-errors\r\n      switch (error.code) {\r\n        case \"storage/unauthorized\":\r\n          // User doesn't have permission to access the object\r\n          dispatch({\r\n            type: UPLOAD_AVATAR_FAIL,\r\n            payload: { error: \"存储错误：未获得授权\" },\r\n          });\r\n          break;\r\n\r\n        case \"storage/canceled\":\r\n          // User canceled the upload\r\n          dispatch({\r\n            type: UPLOAD_AVATAR_FAIL,\r\n            payload: { error: \"存储错误：上传被取消\" },\r\n          });\r\n          break;\r\n\r\n        case \"storage/unknown\":\r\n          // Unknown error occurred, inspect error.serverResponse\r\n          dispatch({\r\n            type: UPLOAD_AVATAR_FAIL,\r\n            payload: { error: \"存储错误：未知\" },\r\n          });\r\n          break;\r\n        default:\r\n          onError(error);\r\n          dispatch({\r\n            type: UPLOAD_AVATAR_FAIL,\r\n            payload: { error: `存储错误：${error.code}` },\r\n          });\r\n          return;\r\n      }\r\n    },\r\n    function () {\r\n      // Upload completed successfully, now we can get the download URL\r\n      uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\r\n        console.log(\"File available at\", downloadURL);\r\n        onSuccess({ downloadURL }, file);\r\n        dispatch({\r\n          type: UPLOAD_AVATAR_DONE,\r\n          payload: { error: null, downloadURL },\r\n        });\r\n      });\r\n    }\r\n  );\r\n};\r\n","// 添加作者档案 单个\r\nexport const ADD_AUTHOR_PROFILE = \"ADD_AUTHOR_PROFILE\";\r\nexport const ADD_AUTHOR_PROFILE_FAIL = \"ADD_AUTHOR_PROFILE_FAIL\";\r\nexport const ADD_AUTHOR_PROFILE_DONE = \"ADD_AUTHOR_PROFILE_DONE\";\r\n\r\n// 上传头像\r\nexport const UPLOAD_AVATAR = \"UPLOAD_AVATAR\";\r\nexport const UPLOAD_AVATAR_FAIL = \"UPLOAD_AVATAR_FAIL\";\r\nexport const UPLOAD_AVATAR_DONE = \"UPLOAD_AVATAR_DONE\";\r\n\r\n// 获取作者档案\r\nexport const FETCH_AUTHOR_PROFILES = \"FETCH_AUTHOR_PROFILES\";\r\nexport const FETCH_AUTHOR_PROFILES_FAIL = \"FETCH_AUTHOR_PROFILES_FAIL\";\r\nexport const FETCH_AUTHOR_PROFILES_DONE = \"FETCH_AUTHOR_PROFILES_DONE\";","// 用户登录\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Form, Input, Button, message } from \"antd\";\r\nimport { signIn } from \"store/auth/auth.actions\";\r\nimport { HOME_PAGE } from \"myConstants/routes\";\r\nimport { MailOutlined, LockOutlined } from \"@ant-design/icons\";\r\n\r\nconst SignIn = ({ signIn, auth }) => {\r\n  const history = useHistory();\r\n\r\n  const onFinish = async ({ email, password }) => {\r\n    try {\r\n      await signIn(email, password);\r\n      message.success(\"欢迎您\");\r\n      history.push(HOME_PAGE);\r\n    } catch (error) {\r\n      message.error(\"登录失败\", error.message);\r\n    }\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    message.error(\"登录失败\", errorInfo);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100vw\",\r\n        height: \"100vh\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n      }}\r\n    >\r\n      <Form\r\n        name=\"sign-in\"\r\n        size=\"large\"\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        style={{ width: 400 }}\r\n      >\r\n        <Form.Item\r\n          name=\"email\"\r\n          rules={[{ required: true, message: \"Please input your email\" }]}\r\n        >\r\n          <Input prefix={<MailOutlined />} placeholder=\"Email\" />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          name=\"password\"\r\n          rules={[{ required: true, message: \"Please input your password\" }]}\r\n        >\r\n          <Input.Password prefix={<LockOutlined />} />\r\n        </Form.Item>\r\n\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\" loading={!auth} block>\r\n            Submit\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    auth: state.auth,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { signIn })(SignIn);\r\n","import { auth } from \"api\";\r\nimport {\r\n  SET_CURRENT_USER,\r\n  CLEAR_CURRENT_USER,\r\n  SIGN_IN,\r\n  SIGN_IN_FAILED,\r\n  SIGN_IN_DONE,\r\n  SIGN_OUT,\r\n  SIGN_OUT_FAILED,\r\n  SIGN_OUT_DONE,\r\n} from \"./auth.actionTypes\";\r\n\r\n// 用户身份验证\r\n// 使用观察者监听用户身份状态\r\nexport const setCurrentUser = () => async (dispatch) => {\r\n  const unsubscribeFromAuth = auth.onAuthStateChanged((user) => {\r\n    user\r\n      ? dispatch({\r\n          type: SET_CURRENT_USER,\r\n          payload: {\r\n            currentUser: {\r\n              email: user.email,\r\n              uid: user.uid,\r\n            },\r\n          },\r\n        })\r\n      : dispatch({\r\n          type: CLEAR_CURRENT_USER,\r\n          payload: {\r\n            currentUser: null,\r\n          },\r\n        });\r\n  });\r\n\r\n  return unsubscribeFromAuth;\r\n};\r\n\r\n// 用户登录\r\nexport const signIn = (email, password) => async (dispatch) => {\r\n  dispatch({\r\n    type: SIGN_IN,\r\n    payload: { error: null },\r\n  });\r\n  try {\r\n    await auth.signInWithEmailAndPassword(email, password);\r\n    dispatch({\r\n      type: SIGN_IN_DONE,\r\n      payload: { error: null },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: SIGN_IN_FAILED,\r\n      payload: { error },\r\n    });\r\n  }\r\n};\r\n\r\nexport const signOut = () => async (dispatch) => {\r\n  dispatch({\r\n    type: SIGN_OUT,\r\n    payload: { error: null },\r\n  });\r\n  try {\r\n    await auth.signOut();\r\n    dispatch({\r\n      type: SIGN_OUT_DONE,\r\n      payload: { error: null },\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: SIGN_OUT_FAILED,\r\n      payload: { error },\r\n    });\r\n  }\r\n};\r\n","// 身份验证\r\nexport const SET_CURRENT_USER = \"SET_CURRENT_USER\";\r\nexport const CLEAR_CURRENT_USER = \"CLEAR_CURRENT_USER\";\r\n\r\n// 用户登录\r\nexport const SIGN_IN = \"SIGN_IN\";\r\nexport const SIGN_IN_FAILED = \"SIGN_IN_FAILED\";\r\nexport const SIGN_IN_DONE = \"SIGN_IN_DONE\";\r\n\r\nexport const SIGN_OUT = \"SIGN_OUT\";\r\nexport const SIGN_OUT_FAILED = \"SIGN_OUT_FAILED\";\r\nexport const SIGN_OUT_DONE = \"SIGN_OUT_DONE\";","import React from \"react\";\r\nimport { Button } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport { LogoutOutlined } from \"@ant-design/icons\";\r\nimport { signOut } from \"store/auth/auth.actions\";\r\n\r\nconst SignOut = ({ signOut }) => {\r\n  const handleClick = () => {\r\n    signOut();\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      size=\"small\"\r\n      type=\"link\"\r\n      onClick={handleClick}\r\n      icon={<LogoutOutlined />}\r\n    >\r\n      登出\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default connect(null, { signOut })(SignOut);\r\n","// 布局模板组件\r\nimport React from \"react\";\r\nimport { Switch, Route, Link } from \"react-router-dom\";\r\nimport { Layout, Menu, BackTop } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  GlobalOutlined,\r\n  CustomerServiceOutlined,\r\n  UserOutlined,\r\n  TagsOutlined,\r\n  HomeOutlined,\r\n} from \"@ant-design/icons\";\r\nimport * as ROUTES from \"myConstants/routes\";\r\nimport TopNav from \"components/TopNav\";\r\nimport AddWork from \"pages/AddWork\";\r\nimport Work from \"components/Work\";\r\nimport Home from \"pages/Home\";\r\nimport WorksPage from \"pages/Works\";\r\nimport AuthorsPage from \"pages/Authors\";\r\nimport TagsPage from \"pages/Tags\";\r\nimport FaqPage from \"pages/FaqPage\";\r\nimport AddAuthor from \"pages/AddAuthorProfile\";\r\nimport SignIn from \"components/SignIn\";\r\nimport SignOut from \"components/SignOut\";\r\n\r\nconst { Header, Sider, Content } = Layout;\r\n\r\nconst BasicLayout = ({ auth: { currentUser }, works, fetchWorks }) => {\r\n  return currentUser ? (\r\n    <Layout>\r\n      <Sider theme=\"light\" style={{ minHeight: \"100vh\" }}>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            font: \"2em fantasy\",\r\n            letterSpacing: 4,\r\n            margin: 8,\r\n            padding: \"0 16px\",\r\n          }}\r\n        >\r\n          <span>Sound</span>\r\n          <span>Asmr</span>\r\n        </div>\r\n        <Menu mode=\"inline\" defaultSelectedKeys={[\"home\"]}>\r\n          <Menu.Item key=\"home\">\r\n            <Link to={ROUTES.HOME_PAGE}>\r\n              <HomeOutlined />\r\n              <span>主页</span>\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"works\">\r\n            <Link to={ROUTES.WORKS_PAGE}>\r\n              <CustomerServiceOutlined />\r\n              <span>作品</span>\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"authors\">\r\n            <Link to={ROUTES.AUTHORS_PAGE}>\r\n              <UserOutlined />\r\n              <span>艺术家</span>\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"tags\">\r\n            <Link to={ROUTES.TAGS_PAGE}>\r\n              <TagsOutlined />\r\n              <span>标签</span>\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"faq\">\r\n            <Link to={ROUTES.FAQ_PAGE}>\r\n              <GlobalOutlined />\r\n              <span>FAQ</span>\r\n            </Link>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Sider>\r\n      <Layout>\r\n        <Header\r\n          style={{\r\n            background: \"white\",\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <TopNav />\r\n          {currentUser ? <SignOut /> : null}\r\n        </Header>\r\n        <Content style={{ padding: 16, background: \"white\" }}>\r\n          <Switch>\r\n            <Route path={ROUTES.HOME_PAGE} exact>\r\n              <Home />\r\n            </Route>\r\n            <Route path={ROUTES.ADD_WORK}>\r\n              <AddWork />\r\n            </Route>\r\n            <Route path={ROUTES.ADD_AUTHOR}>\r\n              <AddAuthor />\r\n            </Route>\r\n            <Route path={ROUTES.WORKS_PAGE}>\r\n              <WorksPage />\r\n            </Route>\r\n            <Route path={ROUTES.AUTHORS_PAGE}>\r\n              <AuthorsPage />\r\n            </Route>\r\n            <Route path={ROUTES.TAGS_PAGE}>\r\n              <TagsPage />\r\n            </Route>\r\n            <Route path={ROUTES.FAQ_PAGE}>\r\n              <FaqPage />\r\n            </Route>\r\n            <Route path={ROUTES.WORK_PAGE}>\r\n              <Work />\r\n            </Route>\r\n          </Switch>\r\n        </Content>\r\n      </Layout>\r\n      <BackTop />\r\n    </Layout>\r\n  ) : (\r\n    <SignIn />\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { auth } = state;\r\n  return {\r\n    auth,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(BasicLayout);\r\n","import React, { useEffect } from \"react\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { ConfigProvider } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport zhCN from \"antd/es/locale/zh_CN\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/zh-cn\";\r\nimport \"./App.css\";\r\nimport BasicLayout from \"../Layout\";\r\nimport { fetchWorks } from \"store/works/works.actions\";\r\nimport { setCurrentUser } from \"store/auth/auth.actions\";\r\nimport { fetchTags } from \"store/tags/tags.actions\";\r\nimport { fetchAuthors } from \"store/authors/authors.actions\";\r\nimport { fetchAuthorProfiles } from \"store/authorProfile/authorProfile.acitons\";\r\n\r\nmoment.locale(\"zh-cn\");\r\n\r\nfunction App({\r\n  setCurrentUser,\r\n  fetchWorks,\r\n  fetchAuthors,\r\n  fetchTags,\r\n  fetchAuthorProfiles,\r\n}) {\r\n  useEffect(() => {\r\n    async function subscribeAuth() {\r\n      const unsubscribeFromAuth = await setCurrentUser();\r\n      return unsubscribeFromAuth;\r\n    }\r\n    subscribeAuth();\r\n  }, [setCurrentUser]);\r\n\r\n  useEffect(() => {\r\n    fetchWorks();\r\n  }, [fetchWorks]);\r\n\r\n  useEffect(() => {\r\n    fetchAuthors();\r\n  }, [fetchAuthors]);\r\n\r\n  useEffect(() => {\r\n    fetchTags();\r\n  }, [fetchTags]);\r\n\r\n  useEffect(() => {\r\n    fetchAuthorProfiles();\r\n  }, [fetchAuthorProfiles]);\r\n\r\n  return (\r\n    <ConfigProvider locale={zhCN}>\r\n      <BrowserRouter basename=\"/soundasm\">\r\n        <BasicLayout />\r\n      </BrowserRouter>\r\n    </ConfigProvider>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    auth: state.auth,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  setCurrentUser,\r\n  fetchWorks,\r\n  fetchAuthors,\r\n  fetchTags,\r\n  fetchAuthorProfiles,\r\n})(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { SET_CURRENT_USER, CLEAR_CURRENT_USER } from \"./auth.actionTypes\";\r\n\r\n// 用户身份验证\r\nconst initialState = {\r\n  currentUser: null,\r\n};\r\n\r\nconst auth = (state = initialState, action) => {\r\n  const { type, payload = {} } = action;\r\n  const { currentUser } = payload;\r\n  switch (type) {\r\n    case SET_CURRENT_USER:\r\n      return { ...state, currentUser };\r\n    case CLEAR_CURRENT_USER:\r\n      return { ...state, currentUser };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default auth;\r\n","import {\r\n  FETCH_WORKS,\r\n  FETCH_WORKS_FAIL,\r\n  FETCH_WORKS_DONE,\r\n  ADD_WORK,\r\n  ADD_WORK_DONE,\r\n  ADD_WORK_FAIL,\r\n  UPDATE_WORK,\r\n  UPDATE_WORK_FAIL,\r\n  UPDATE_WORK_DONE,\r\n  CHECK_WORK_EXISTS,\r\n  ALL_WORKS_LOADED,\r\n} from \"store/works/works.actionTypes\";\r\n\r\nconst initialState = {\r\n  error: null,\r\n  isFetching: false,\r\n  items: [],\r\n  allWorksLoaded: false,\r\n  isOperating: false,\r\n};\r\n\r\nconst works = (state = initialState, action) => {\r\n  const { type, payload = {} } = action;\r\n  const {\r\n    error,\r\n    isFetching,\r\n    items,\r\n    isOperating,\r\n    work,\r\n    exists,\r\n    allWorksLoaded,\r\n  } = payload;\r\n  switch (type) {\r\n    case FETCH_WORKS_FAIL:\r\n      return { ...state, isFetching, error };\r\n    case FETCH_WORKS_DONE:\r\n      return { ...state, isFetching, items };\r\n    case FETCH_WORKS:\r\n      return { ...state, isFetching };\r\n    case CHECK_WORK_EXISTS:\r\n      return { ...state, exists };\r\n    case ALL_WORKS_LOADED:\r\n      return { ...state, allWorksLoaded };\r\n    case ADD_WORK:\r\n      return { ...state, isOperating };\r\n    case ADD_WORK_FAIL:\r\n      return { ...state, error, isOperating };\r\n    case ADD_WORK_DONE:\r\n      return { ...state, items: [work, ...state.items], error, isOperating };\r\n    case UPDATE_WORK:\r\n      return { ...state, error, isOperating };\r\n    case UPDATE_WORK_FAIL:\r\n      return { ...state, error, isOperating };\r\n    case UPDATE_WORK_DONE:\r\n      return {\r\n        ...state,\r\n        items: [\r\n          ...state.items.map((item) => (item.id === work.id ? work : item)),\r\n        ],\r\n        isOperating,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default works;\r\n","import {\r\n  FETCH_TAGS,\r\n  FETCH_TAGS_DONE,\r\n  FETCH_TAGS_FAIL,\r\n  ADD_TAGS,\r\n  ADD_TAGS_DONE,\r\n  ADD_TAGS_FAIL\r\n} from \"store/tags/tags.actionTypes\";\r\n\r\nconst tags = (\r\n  state = { isFetching: false, error: null, tagItems: {} },\r\n  action\r\n) => {\r\n  const { type, payload = {} } = action;\r\n  const { isFetching, error, tagItems, tags } = payload;\r\n  switch (type) {\r\n    case FETCH_TAGS:\r\n      return { ...state, isFetching };\r\n    case FETCH_TAGS_DONE:\r\n      return { ...state, isFetching, tagItems };\r\n    case FETCH_TAGS_FAIL:\r\n      return { ...state, isFetching, error };\r\n    case ADD_TAGS:\r\n      return { ...state, error };\r\n    case ADD_TAGS_DONE:\r\n      return { ...state, tagItems: { ...state.tagItems, ...tags }, error };\r\n    case ADD_TAGS_FAIL:\r\n      return { ...state, error };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default tags;\r\n","import {\r\n  ADD_AUTHORS,\r\n  ADD_AUTHORS_FAIL,\r\n  ADD_AUTHORS_DONE,\r\n  FETCH_AUTHORS_DONE,\r\n  FETCH_AUTHORS,\r\n  FETCH_AUTHORS_FAIL,\r\n} from \"store/authors/authors.actionTypes\";\r\n\r\nconst authors = (\r\n  state = { isFetching: false, error: null, authorItems: {} },\r\n  action\r\n) => {\r\n  const { type, payload = {} } = action;\r\n  const { isFetching, error, newAuthors, authorItems } = payload;\r\n  switch (type) {\r\n    case FETCH_AUTHORS:\r\n      return { ...state, isFetching, error };\r\n    case FETCH_AUTHORS_FAIL:\r\n      return { ...state, isFetching, error };\r\n    case FETCH_AUTHORS_DONE:\r\n      return { ...state, isFetching, error, authorItems };\r\n    case ADD_AUTHORS:\r\n      return { ...state, error };\r\n    case ADD_AUTHORS_DONE:\r\n      return {\r\n        ...state,\r\n        authorItems: { ...state.authorItems, ...newAuthors },\r\n        error,\r\n      };\r\n    case ADD_AUTHORS_FAIL:\r\n      return { ...state, error };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default authors;\r\n","import {\r\n  ADD_AUTHOR_PROFILE,\r\n  ADD_AUTHOR_PROFILE_FAIL,\r\n  ADD_AUTHOR_PROFILE_DONE,\r\n  FETCH_AUTHOR_PROFILES,\r\n  FETCH_AUTHOR_PROFILES_FAIL,\r\n  FETCH_AUTHOR_PROFILES_DONE,\r\n  UPLOAD_AVATAR,\r\n  UPLOAD_AVATAR_FAIL,\r\n  UPLOAD_AVATAR_DONE,\r\n} from \"store/authorProfile/authorProfile.actionTypes\";\r\n\r\nconst authorProfile = (\r\n  state = { isFetching: false, error: null, profile: null, profiles: null },\r\n  action\r\n) => {\r\n  const { type, payload = {} } = action;\r\n  const {\r\n    error,\r\n    profile /* 新增作者的档案 */,\r\n    profiles,\r\n    isFetching,\r\n    downloadURL /* 头像的地址 */,\r\n    progress /* 头像上传进度 */,\r\n  } = payload;\r\n  switch (type) {\r\n    case ADD_AUTHOR_PROFILE:\r\n      return { ...state };\r\n    case ADD_AUTHOR_PROFILE_FAIL:\r\n      return { ...state, error };\r\n    case ADD_AUTHOR_PROFILE_DONE:\r\n      return {\r\n        ...state,\r\n        profiles: { ...state.profiles, [profile.name]: profile },\r\n      };\r\n    case FETCH_AUTHOR_PROFILES:\r\n      return { ...state, isFetching };\r\n    case FETCH_AUTHOR_PROFILES_FAIL:\r\n      return { ...state, isFetching, error };\r\n    case FETCH_AUTHOR_PROFILES_DONE:\r\n      return { ...state, isFetching, profiles };\r\n    case UPLOAD_AVATAR:\r\n      return { ...state, progress };\r\n    case UPLOAD_AVATAR_FAIL:\r\n      return { ...state, progress, error };\r\n    case UPLOAD_AVATAR_DONE:\r\n      return { ...state, progress, downloadURL };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default authorProfile;\r\n","import {\r\n  ADD_COMMENT,\r\n  ADD_COMMENT_DONE,\r\n  ADD_COMMENT_FAILED,\r\n  FETCH_COMMENTS_BY_WORK,\r\n  FETCH_COMMENTS_BY_WORK_DONE,\r\n  FETCH_COMMENTS_BY_WORK_FAILED,\r\n} from \"store/comments/comments.actionTypes\";\r\n\r\nconst initialState = {\r\n  error: null,\r\n  isFetching: false,\r\n  isSubmitting: false,\r\n  commentItems: {},\r\n};\r\n\r\nconst comments = (state = initialState, action) => {\r\n  const { type, payload = {} } = action;\r\n  const { newComment, error, isFetching, comments, isSubmitting } = payload;\r\n  switch (type) {\r\n    case FETCH_COMMENTS_BY_WORK:\r\n      return {\r\n        ...state,\r\n        isFetching,\r\n        error,\r\n      };\r\n    case FETCH_COMMENTS_BY_WORK_FAILED:\r\n      return {\r\n        ...state,\r\n        isFetching,\r\n        error,\r\n      };\r\n    case FETCH_COMMENTS_BY_WORK_DONE:\r\n      return {\r\n        ...state,\r\n        isFetching,\r\n        commentItems: comments,\r\n      };\r\n    case ADD_COMMENT:\r\n      return { ...state, isSubmitting };\r\n    case ADD_COMMENT_FAILED:\r\n      return { ...state, error, isSubmitting };\r\n    case ADD_COMMENT_DONE:\r\n      return {\r\n        ...state,\r\n        error,\r\n        isSubmitting,\r\n        commentItems: {\r\n          ...state.commentItems,\r\n          [newComment.id]: newComment,\r\n        },\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default comments;\r\n","// 针对作品的过滤器\r\nimport { SET_VISIBILITY_FILTER } from \"store/visibilityFilter/visibilityFilter.actionTypes\";\r\n\r\nconst initialState = {\r\n  author: null,\r\n  rating: null,\r\n  language: null,\r\n  tag: null,\r\n  rj: null,\r\n  title: null,\r\n  onlyShowWorksWithScript: false,\r\n};\r\n\r\nconst visibilityFilter = (state = initialState, action) => {\r\n  const { type, payload = {} } = action;\r\n  const { filter } = payload;\r\n\r\n  switch (type) {\r\n    case SET_VISIBILITY_FILTER:\r\n      return { ...state, ...filter };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default visibilityFilter;\r\n","import { combineReducers } from \"redux\";\r\nimport auth from \"store/auth/auth.reducer\";\r\nimport works from \"store/works/works.reducer\";\r\nimport tags from \"store/tags/tags.reducer\";\r\nimport authors from \"store/authors/authors.reducer\";\r\nimport authorProfile from \"store/authorProfile/authorProfile.reducer\";\r\nimport comments from \"store/comments/comments.reducer\";\r\nimport visibilityFilter from \"store/visibilityFilter/visibilityFilter.reducer\";\r\n\r\nconst reducer = combineReducers({\r\n  auth,\r\n  works,\r\n  tags,\r\n  authors,\r\n  authorProfile,\r\n  comments,\r\n  visibilityFilter,\r\n});\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport reducer from \"store/rootReducer\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n  reducer,\r\n  composeEnhancers(applyMiddleware(thunkMiddleware))\r\n);\r\n\r\nexport default store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\n\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}