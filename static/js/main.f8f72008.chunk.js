(this.webpackJsonpsoundgasm=this.webpackJsonpsoundgasm||[]).push([[0],{153:function(e,t,a){e.exports={header:"AuthorProfile_header__2bp_d",bio:"AuthorProfile_bio__Y3Unt",slidein:"AuthorProfile_slidein__3Nwl8"}},247:function(e,t,a){e.exports=a(482)},260:function(e,t,a){},481:function(e,t,a){},482:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(9),c=a.n(l),o=(a(252),a(6)),s=a(5),u=a.n(s),i=a(12),m=a(23),p=a(18),E=a(244),f=a(27),d=a.n(f),h=(a(259),a(260),a(261),a(245)),g=(a(263),a(86)),b=(a(266),a(103)),y=a(73),O=a(489),v=a(494),A=a(491),_=a(487),w=a(486),I=(a(186),a(140)),T=(a(59),a(19)),k=a(488),F=(a(88),a(43)),j=a(54),S=(a(77),a(24)),R=S.a.Search,D=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),a=t[0],l=t[1];return n.a.createElement(F.a,{title:a},n.a.createElement(R,{placeholder:"\u8f93\u5165 RJ \u7f16\u53f7",style:{width:160},onSearch:function(e){console.log("rj",e);var t=e.toUpperCase();!function(e){if(8===e.length){var t=parseInt(e.slice(2));return!!e.startsWith("RT")||e.startsWith("RJ")&&t>=1e3&&t<=4e5}if(6===e.length){var a=parseInt(e);return a>=1e3&&a<=4e5}return!1}(t)?l("\u683c\u5f0f\uff1aRJ138503"):window.open("".concat("https://www.dlsite.com/maniax/work/=/product_id/").concat(t,".html"),"_blank")},allowClear:!0}))},C=function(){return n.a.createElement(I.a,{size:"middle"},n.a.createElement(m.b,{to:"/addWork"},n.a.createElement(T.a,{type:"dashed",icon:n.a.createElement(k.a,null)},"\u6dfb\u52a0\u4f5c\u54c1")),n.a.createElement(m.b,{to:"/addAuthor"},n.a.createElement(T.a,{type:"dashed",icon:n.a.createElement(k.a,null)},"\u6dfb\u52a0\u827a\u672f\u5bb6")),n.a.createElement(D,null))},x=(a(330),a(241)),L=(a(199),a(150)),U=(a(334),a(76)),N=(a(174),a(46)),P=a(4),H=(a(123),a(10)),W=(a(175),a(32)),M=a(84),K=a.n(M);a(483),a(341),a(343);K.a.initializeApp({apiKey:"AIzaSyBaj7axNAlxURzJKyk7ouCLQjQcFBqrLgg",authDomain:"soundgasm-886ff.firebaseapp.com",databaseURL:"https://soundgasm-886ff.firebaseio.com",projectId:"soundgasm-886ff",storageBucket:"soundgasm-886ff.appspot.com",messagingSenderId:"987949269498",appId:"1:987949269498:web:e7a749ba974731d2222443",measurementId:"G-M49309VSDC"});var G=K.a.auth(),Y=K.a.firestore(),V=Y.collection("works"),z=Y.collection("authors"),B=Y.collection("tags"),q=Y.collection("comments"),J=(K.a.firestore.FieldValue.delete,Y.batch,K.a.storage().ref()),X=K.a.storage,Q=a(50),Z=function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_TAGS",payload:{isFetching:!0,error:null}}),e.prev=1,e.next=4,B.doc("all").get();case 4:a=e.sent,r=a.data(),t({type:"FETCH_TAGS_DONE",payload:{isFetching:!1,error:null,tagItems:r}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"FETCH_TAGS_FAIL",payload:{isFetching:!1,error:e.t0}});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},$=function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_AUTHORS",payload:{isFetching:!0,error:null,authorItems:{}}}),e.prev=1,e.next=4,z.doc("all").get();case 4:a=e.sent,r=a.data(),t({type:"FETCH_AUTHORS_DONE",payload:{isFetching:!1,error:null,authorItems:r}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"FETCH_AUTHORS_FAIL",payload:{isFetching:!1,error:e.t0}});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},ee=function(e){return function(){var t=Object(i.a)(u.a.mark((function t(a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ADD_AUTHORS",payload:{error:null}}),t.prev=1,r={},Array.isArray(e)?e.forEach((function(e){return r[e]=e})):r[e]=e,t.next=6,z.doc("all").set(r,{merge:!0});case 6:a({type:"ADD_AUTHORS_DONE",payload:{newAuthors:r}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"ADD_AUTHORS_FAIL",payload:{error:t.t0}});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},te=["English","Japanese","Chinese","Korean","Spanish","French"],ae=["ALL_AGE","R15","R18"],re=S.a.TextArea,ne=W.a.Option,le={labelCol:{span:6},wrapperCol:{span:12}},ce={wrapperCol:{offset:6,span:6}},oe=te.map((function(e){return n.a.createElement(ne,{key:e},e)})),se=Object(p.b)((function(e){return{tags:e.tags,authors:e.authors}}),{fetchTags:Z,addTags:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ADD_TAGS",payload:{error:null}}),t.prev=1,r={},e.forEach((function(e){return r[e]=e})),t.next=6,B.doc("all").set(r,{merge:!0});case 6:a({type:"ADD_TAGS_DONE",payload:{tags:r}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"ADD_TAGS_FAIL",payload:{error:t.t0}});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},checkWorkExists:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(a){var r,n,l,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!1,n=[],l=e.rj,c=e.title,!l){t.next=17;break}return t.t0=Promise,t.next=7,V.where("rj","==",l).get();case 7:return t.t1=t.sent.empty,t.next=10,V.where("title","==",c).get();case 10:return t.t2=t.sent.empty,t.t3=[t.t1,t.t2],t.next=14,t.t0.all.call(t.t0,t.t3);case 14:n=t.sent,t.next=21;break;case 17:return t.next=19,V.where("title","==",c).get();case 19:t.t4=t.sent.empty,n=[t.t4];case 21:return n.forEach((function(e){e||(r=!0)})),a({type:"CHECK_WORK_EXISTS",payload:{exists:r}}),t.abrupt("return",r);case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},addWork:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ADD_WORK",payload:{error:null}}),t.prev=1,t.next=4,V.add(e);case 4:a({type:"ADD_WORK_DONE",payload:{work:e}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"ADD_WORK_FAIL",payload:{error:t.t0}});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},updateWork:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"UPDATE_WORK",payload:{error:null}}),t.prev=1,t.next=4,V.doc(e.id).update(e);case 4:a({type:"UPDATE_WORK_DONE",payload:{work:e}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"UPDATE_WORK_FAIL",payload:{error:t.t0}});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchAuthors:$,addAuthors:ee})((function(e){var t=e.tags,a=e.fetchTags,l=e.addTags,c=e.checkWorkExists,o=e.addWork,s=e.updateWork,m=e.authors,p=e.fetchAuthors,E=e.addAuthors,d=H.a.useForm(),h=Object(j.a)(d,1)[0],g=Object(y.g)(),b=t.tagItems,O=m.authorItems,v=!!g.state,A=Object(r.useState)(v?g.state.tags:[]),_=Object(j.a)(A,2),w=_[0],I=_[1],k=Object(r.useState)(v?g.state.author:[]),F=Object(j.a)(k,2),R=F[0],D=F[1],C=v?Object(P.a)({},g.state,{editAt:f(g.state.editAt,"YYYY-MM-DD hh:mm:ss")}):{title:"",author:[],rj:null,url:null,imageSrc:null,Illustrator:null,description:null,tags:[],rating:"R18",star:4,hasGot:!0,language:[],script:null,editAt:f()};Object(r.useEffect)((function(){p()}),[p]),Object(r.useEffect)((function(){a()}),[a]);var M=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("\u63d0\u4ea4\u7684\u8868\u683c\u6570\u636e",t),a=Object(P.a)({},t,{editAt:t.editAt.format("YYYY-MM-DD hh:mm:ss")}),e.prev=2,!v){e.next=10;break}return r=g.state.id,e.next=7,Promise.all([s(Object(P.a)({},a,{id:r})),l(w),E(R)]);case 7:N.a.success("\u66f4\u65b0\u4f5c\u54c1\u6210\u529f",1),e.next=20;break;case 10:return e.next=12,c(t);case 12:if(!e.sent){e.next=17;break}return N.a.warn("\u8be5\u4f5c\u54c1\u5df2\u5b58\u5728",2),h.resetFields(),e.abrupt("return");case 17:return e.next=19,Promise.all([o(a),l(w),E(R)]);case 19:N.a.success("\u6dfb\u52a0\u4f5c\u54c1\u6210\u529f",1);case 20:h.resetFields(),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(2),N.a.error("\u6dfb\u52a0\u4f5c\u54c1\u5931\u8d25",2),console.log(e.t0);case 27:return e.prev=27,e.finish(27);case 29:case"end":return e.stop()}}),e,null,[[2,23,27,29]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(H.a,Object.assign({initialValues:C,onFinish:M,form:h},le),n.a.createElement(H.a.Item,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}]},n.a.createElement(S.a,null)),n.a.createElement(H.a.Item,{label:"\u4f5c\u8005",name:"author",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f5c\u8005"}]},n.a.createElement(W.a,{mode:"tags",onChange:function(e){console.log("authors:",e),h.setFieldsValue({authors:e});var t=e.map((function(e){return e.trim()}));D(t)},tokenSeparators:["/","&"],loading:m.isFetching},Object.keys(O).map((function(e){return n.a.createElement(ne,{key:e},e)})))),n.a.createElement(H.a.Item,{label:"\u94fe\u63a5",name:"url"},n.a.createElement(S.a,null)),n.a.createElement(H.a.Item,{label:"\u5c01\u9762 URL",name:"imageSrc"},n.a.createElement(S.a,null)),n.a.createElement(H.a.Item,{label:"\u63d2\u753b\u5e08",name:"Illustrator"},n.a.createElement(S.a,null)),n.a.createElement(H.a.Item,{label:"RJ",name:"rj"},n.a.createElement(S.a,null)),n.a.createElement(H.a.Item,{label:"\u5e74\u9f84\u5206\u7ea7",name:"rating"},n.a.createElement(U.a.Group,null,n.a.createElement(U.a,{value:"ALL_AGE"},"\u5168\u5e74\u9f84"),n.a.createElement(U.a,{value:"R15"},"R15"),n.a.createElement(U.a,{value:"R18"},"R18"))),n.a.createElement(H.a.Item,{label:"\u63cf\u8ff0",name:"description"},n.a.createElement(re,{autoSize:!0})),n.a.createElement(H.a.Item,{label:"\u8bed\u8a00",name:"language",rules:[{required:!0,message:"\u8bf7\u6307\u5b9a\u4f5c\u54c1\u8bed\u8a00"}]},n.a.createElement(W.a,{mode:"tags",style:{width:"100%"}},oe)),n.a.createElement(H.a.Item,{label:"\u6807\u7b7e",name:"tags"},n.a.createElement(W.a,{mode:"tags",style:{width:"100%"},onChange:function(e){console.log("tags:",e),h.setFieldsValue({tags:e});var t=e.map((function(e){return e.trim()}));I(t)},loading:t.isFetching,tokenSeparators:["/","\\","\u3001","[","]"]},Object.keys(b).map((function(e){return n.a.createElement(ne,{key:e},e)})))),n.a.createElement(H.a.Item,{label:"\u662f\u5426\u62e5\u6709",name:"hasGot"},n.a.createElement(U.a.Group,null,n.a.createElement(U.a,{value:!0},"\u662f"),n.a.createElement(U.a,{value:!1},"\u5426"))),n.a.createElement(H.a.Item,{label:"\u6253\u5206",name:"star"},n.a.createElement(L.a,null)),n.a.createElement(H.a.Item,{label:"\u53f0\u672c",name:"script"},n.a.createElement(re,{placeholder:"\u53f0\u672c",autoSize:{minRows:2}})),n.a.createElement(H.a.Item,{label:"\u65f6\u95f4",name:"editAt"},n.a.createElement(x.a,{showTime:!0,onChange:function(e,t){console.log("selected value:",e),console.log("formatted value:",t)}})),n.a.createElement(H.a.Item,ce,n.a.createElement(T.a,{type:"primary",htmlType:"submit",block:!0},v?"\u66f4\u65b0\u4f5c\u54c1":"\u65b0\u589e\u4f5c\u54c1")))})),ue=(a(130),a(53)),ie=(a(122),a(55)),me=(a(131),a(37)),pe=(a(108),a(35)),Ee=a(493),fe=(a(214),a(102)),de=(a(438),a(229)),he=function(e){var t=e.commentList;return n.a.createElement(fe.a,{dataSource:t,itemLayout:"horizontal",renderItem:function(e){return n.a.createElement(de.a,{author:e.author,content:e.content,datetime:n.a.createElement(F.a,{title:e.datetime},n.a.createElement("span",null,d()(e.datetime,"YYYY-MM-DD HH:mm:ss").fromNow()))})}})},ge=S.a.TextArea,be=function(e){var t=e.workId,a=e.author,r=e.commitComment,l=e.isSubmitting;return n.a.createElement(H.a,{name:"comment-editor",onFinish:function(e){var n=e.comment;console.log(n);var l={content:n,datetime:d()().format("YYYY-MM-DD HH:mm:ss"),author:a,workId:t};console.log("comment to commit:",l),r(l)}},n.a.createElement(H.a.Item,{name:"comment",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bc4\u8bba"},{whitespace:!0,message:"\u8bc4\u8bba\u4e0d\u80fd\u4e3a\u7a7a\u5b57\u7b26"}]},n.a.createElement(ge,{autoSize:{minRows:2,maxRows:6},allowClear:!0})),n.a.createElement(H.a.Item,null,n.a.createElement(T.a,{htmlType:"submit",loading:l,type:"primary"},"\u53d1\u5e03\u8bc4\u8bba")))},ye=function(e){var t=Object.keys(e.commentItems).map((function(t){return e.commentItems[t]}));return Object(P.a)({},e,{commentItems:t})},Oe=Object(p.b)((function(e){var t=e.auth,a=e.comments;return{auth:t,comments:ye(a)}}),{addComment:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(a){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ADD_COMMENT",payload:{error:null,isSubmitting:!0}}),t.prev=1,r=q.doc(),n=Object(P.a)({},e,{id:r.id}),t.next=6,r.set(n,{merge:!0});case 6:a({type:"ADD_COMMENT_DONE",payload:{error:null,isSubmitting:!1,newComment:n}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"ADD_COMMENT_FAILED",payload:{isSubmitting:!1,error:t.t0}});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},fetchCommentsByWork:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"FETCH_COMMENTS_BY_WORK",payload:{error:null,isFetching:!0}}),t.prev=1,r={},t.next=5,q.where("workId","==",e).get();case 5:t.sent.forEach((function(e){return r[e.id]=e.data()})),console.log("comments",r),a({type:"FETCH_COMMENTS_BY_WORK_DONE",payload:{error:null,isFetching:!1,comments:r}}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a({type:"FETCH_COMMENTS_BY_WORK_FAILED",payload:{error:t.t0}});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.workId,a=e.auth,l=e.comments,c=e.addComment,o=e.fetchCommentsByWork,s=a.currentUser.email.split("@")[0];return Object(r.useEffect)((function(){o(t)}),[t,o]),n.a.createElement("div",null,n.a.createElement(he,{commentList:l.commentItems}),n.a.createElement(be,{workId:t,author:s,commitComment:c,isSubmitting:l.isSubmitting}))})),ve=pe.a.Title,Ae=pe.a.Paragraph,_e=function(){var e=Object(y.g)().state;return n.a.createElement("div",null,n.a.createElement(ue.a,{gutter:[32,32],align:"middle"},n.a.createElement(me.a,null,n.a.createElement("div",null,n.a.createElement("img",{src:e.imageSrc||"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png",alt:e.title}))),n.a.createElement(me.a,{flex:"450px"},n.a.createElement(ve,{level:3},e.title),n.a.createElement(Ae,null,"\u4f5c\u8005\uff1a",e.author.map((function(e){return n.a.createElement(ie.a,{className:"tag",color:"purple",key:e},e)}))),n.a.createElement(Ae,null,"\u5206\u7ea7\uff1a",e.rating),n.a.createElement(Ae,null,"\u8bed\u8a00\uff1a",e.language),n.a.createElement(Ae,null,"\u63cf\u8ff0\uff1a",e.description),n.a.createElement(Ae,null,"\u62e5\u6709\uff1a",e.hasGot?"\u662f":"\u5426"),n.a.createElement(Ae,null,"\u94fe\u63a5\uff1a",n.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url&&"\u8bbf\u95ee\u5916\u94fe")),n.a.createElement(Ae,null,"\u7f16\u53f7\uff1a",e.rj),n.a.createElement(Ae,null,"\u6807\u7b7e\uff1a",e.tags.map((function(e){return n.a.createElement(ie.a,{key:e,color:"geekblue",style:{margin:4}},e)}))),n.a.createElement(Ae,null,"\u8bc4\u5206\uff1a ",n.a.createElement(L.a,{defaultValue:e.star})))),n.a.createElement(ue.a,{gutter:[32,32]},n.a.createElement(me.a,{span:14},n.a.createElement(ve,{level:4},"\u53f0\u672c"),n.a.createElement(Ae,null,n.a.createElement("pre",null,e.script))),n.a.createElement(me.a,{span:10},n.a.createElement(ve,{level:4},"\u8bc4\u8bba"),n.a.createElement(Oe,{workId:e.id}))),n.a.createElement(ue.a,{gutter:[32,32]},n.a.createElement(me.a,{span:4},n.a.createElement(m.b,{to:{pathname:"/addWork",state:e}},n.a.createElement(Ee.a,null)," \u7f16\u8f91")),n.a.createElement(me.a,{span:8},n.a.createElement("span",null,"\u66f4\u65b0\u65f6\u95f4\uff1a",e.editAt))))},we=pe.a.Paragraph,Ie=(pe.a.Title,function(){return n.a.createElement("div",null,n.a.createElement(we,null,"\u8749\u9e23"),n.a.createElement(we,null,"\u6d77\u6d6a\u62cd\u6253\u6c99\u6ee9"),n.a.createElement(we,null,"\u98ce\u5439\u8fc7\u6811\u53f6\u6c99\u6c99\u4f5c\u54cd"),n.a.createElement(we,null,"\u96e8\u6ef4\u843d\u4e0b"),n.a.createElement(we,null,"\u6728\u5934\u71c3\u70e7\u65f6\u53d1\u51fa\u7684\u567c\u91cc\u556a\u5566\u58f0\u97f3"),n.a.createElement(we,null,"\u8239\u6868\u5212\u8fc7\u6c34\u9762\uff0c\u8361\u8d77\u6d9f\u6f2a\u53d1\u51fa\u7684\u58f0\u97f3"))}),Te=(a(132),a(62)),ke=W.a.Option,Fe=S.a.Search,je=Object(p.b)((function(e){return{tags:e.tags,authors:e.authors}}),{setVisibilityFilter:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SET_VISIBILITY_FILTER",payload:{filter:e}});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fetchTags:Z,fetchAuthors:$})((function(e){var t=e.tags,a=e.authors,l=e.setVisibilityFilter,c=e.fetchAuthors,o=e.fetchTags,s=a.authorItems,u=t.tagItems,i=Object.keys(s),m=Object.keys(u);Object(r.useEffect)((function(){c()}),[c]),Object(r.useEffect)((function(){o()}),[o]);return n.a.createElement(I.a,{direction:"vertical",size:"large",style:{position:"fixed"}},n.a.createElement(W.a,{allowClear:!0,showSearch:!0,placeholder:"\u4f5c\u8005",style:{width:200},onChange:function(e){console.log("on change",e),l({author:e})},loading:s.isFetching},i.map((function(e){return n.a.createElement(ke,{key:e},e)}))),n.a.createElement(W.a,{allowClear:!0,showSearch:!0,placeholder:"\u6807\u7b7e",style:{width:200},onChange:function(e){console.log("on change",e),l({tag:e})},loading:u.isFetching},m.map((function(e){return n.a.createElement(ke,{key:e},e)}))),n.a.createElement(W.a,{allowClear:!0,showSearch:!0,placeholder:"\u8bed\u8a00",style:{width:200},onChange:function(e){l({language:e})}},te.map((function(e){return n.a.createElement(ke,{key:e},e)}))),n.a.createElement(W.a,{allowClear:!0,showSearch:!0,placeholder:"\u5e74\u9f84\u5206\u7ea7",style:{width:200},onChange:function(e){l({rating:e})}},ae.map((function(e){return n.a.createElement(ke,{key:e},e)}))),n.a.createElement(Fe,{placeholder:"RJ",onSearch:function(e){l({rj:e})},enterButton:!0,allowClear:!0}),n.a.createElement(Fe,{placeholder:"Title",onSearch:function(e){l({title:e})},enterButton:!0,allowClear:!0}))})),Se=pe.a.Paragraph,Re=function(e,t){console.count("getVisibleWorks");var a=e.items,r=t.author,n=t.tag,l=t.language,c=t.rating,o=t.rj,s=t.title,u=a.filter((function(e){var t=!r||e.author.includes(r),a=!n||e.tags.includes(n),u=!l||e.language.includes(l),i=!c||e.rating===c,m=!o||e.rj&&e.rj.includes(o),p=!s||e.title.toLowerCase().includes(s.toLowerCase());return t&&a&&u&&i&&m&&p}));return Object(P.a)({},e,{items:u})},De=Object(p.b)((function(e){var t=e.works,a=e.visibilityFilter;return{works:Re(t,a)}}),{fetchWorks:function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_WORKS",payload:{isFetching:!0,error:null}}),a=[],e.prev=2,e.next=5,V.orderBy("editAt","desc").get();case 5:e.sent.forEach((function(e){return a.push(Object(P.a)({},e.data(),{id:e.id}))})),t({type:"FETCH_WORKS_DONE",payload:{isFetching:!1,error:null,items:a}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:"FETCH_WORKS_FAIL",payload:{isFetching:!1,error:e.t0}});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.works,a=e.fetchWorks,l=t.isFetching,c=t.items;return Object(r.useEffect)((function(){a()}),[a]),n.a.createElement(ue.a,{gutter:[32,32]},n.a.createElement(me.a,{span:18},l&&n.a.createElement(Te.a,{delay:1e3}),n.a.createElement(fe.a,{itemLayout:"vertical",size:"large",style:{maxWidth:750},pagination:{onChange:function(e,t){console.log(e),console.log(t)},defaultPageSize:10},dataSource:c,footer:n.a.createElement("div",null,"\u4e00\u5171 ",c.length," \u4e2a\u4f5c\u54c1"),renderItem:function(e){return n.a.createElement(fe.a.Item,{key:e.title,extra:n.a.createElement("img",{width:280,alt:"logo",src:e.imageSrc||"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png"})},n.a.createElement(fe.a.Item.Meta,{title:n.a.createElement(m.b,{to:{pathname:"/work",hash:"#".concat(e.title),state:e}},e.title),description:"".concat(e.language,"  ").concat(e.rating,"  ").concat(e.rj?e.rj:"")}),n.a.createElement("div",null,e.author.map((function(e){return n.a.createElement(ie.a,{className:"tag",color:"blue",key:e},e)})),n.a.createElement(Se,null,e.description),n.a.createElement("div",null,e.tags.map((function(e){return n.a.createElement(ie.a,{className:"tag",key:e},e)})))))}})),n.a.createElement(me.a,{span:6},n.a.createElement(je,null)))})),Ce=(a(458),a(243)),xe=(a(212),a(148)),Le=a(154),Ue=a(492),Ne=a(153),Pe=a.n(Ne),He=pe.a.Title,We=pe.a.Text,Me=pe.a.Paragraph,Ke=function(e){var t=e.profile;return Object(Le.c)(t,(function(e){return e.name}),{from:{position:"absolute",opacity:0,transform:"translate3d(200px,0,0)"},enter:{opacity:1,transform:"translate3d(0,0,0)"},leave:{opacity:1,transform:"translate3d(0px,0,0)"},config:Le.b.gentle}).map((function(e){e.item;var a=e.key,r=e.props;return n.a.createElement(Le.a.div,{key:a,style:r,className:Pe.a.profile},n.a.createElement("div",{className:Pe.a.header},n.a.createElement(xe.a,{src:t.avatar,size:288}),n.a.createElement("div",{className:Pe.a.bio},n.a.createElement(He,null,t.name),n.a.createElement(We,{type:"secondary"},t.bio),n.a.createElement("span",null,t.url&&n.a.createElement("a",{href:t.url},n.a.createElement(Ue.a,null)," \u5979\u7684\u4e3b\u9875")))),n.a.createElement(Me,{title:"\u95ee\u5019"},t.greetings),n.a.createElement(Me,{title:"\u8bc4\u4ef7"},n.a.createElement("pre",null,t.evaluation)),n.a.createElement(m.b,{to:{pathname:"/addAuthor",state:t}},n.a.createElement(Ee.a,null)," \u7f16\u8f91"))}))},Ge=Object(p.b)((function(e){return{authors:e.authors,authorProfile:e.authorProfile}}),{fetchAuthors:$,fetchAuthorProfiles:function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_AUTHOR_PROFILES",payload:{isFetching:!0,error:null}}),e.prev=1,e.next=4,z.get();case 4:a=e.sent,r={},a.forEach((function(e){var t=e.data().name||"all";r[t]=e.data()})),t({type:"FETCH_AUTHOR_PROFILES_DONE",payload:{isFetching:!1,error:null,profiles:r}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t({type:"FETCH_AUTHOR_PROFILES_FAIL",payload:{isFetching:!1,error:e.t0}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.authors,a=e.authorProfile,l=e.fetchAuthors,c=e.fetchAuthorProfiles,o=t.authorItems,s=a.profiles,u=Object(r.useState)(""),i=Object(j.a)(u,2),m=i[0],p=i[1],E=Object.keys(o),f=s&&s[m];return Object(r.useEffect)((function(){l()}),[l]),Object(r.useEffect)((function(){c()}),[c]),n.a.createElement(ue.a,{gutter:[48,48]},n.a.createElement(me.a,{span:16},a.isfetching&&n.a.createElement(Te.a,null),f?n.a.createElement(Ke,{profile:f}):n.a.createElement(Ce.a,{avatar:!0},n.a.createElement(xe.a,{icon:n.a.createElement(A.a,null)}),n.a.createElement("div",null,"\u8fd9\u4f4d\u827a\u672f\u5bb6\u8fd8\u6ca1\u6709\u6863\u6848^_^"))),n.a.createElement(me.a,{span:8},t.isfetching&&n.a.createElement(Te.a,null),E.map((function(e){return n.a.createElement(T.a,{key:e,shape:"round",onClick:function(){return p(e)}},e)}))))})),Ye=Object(p.b)((function(e){return{tags:e.tags}}),{fetchTags:Z})((function(e){var t=e.tags,a=e.fetchTags,l=t.isFetching,c=t.tagItems;return Object(r.useEffect)((function(){a()}),[a]),n.a.createElement("div",null,n.a.createElement("div",null,l&&n.a.createElement(Te.a,{size:"large",delay:500})),n.a.createElement("div",null,Object.keys(c).map((function(e){return n.a.createElement(ie.a,{color:"geekblue",style:{margin:6},key:e},e)}))))})),Ve=pe.a.Paragraph,ze=pe.a.Title,Be=function(){return n.a.createElement(ue.a,null,n.a.createElement(me.a,{span:18,offset:3},n.a.createElement(ze,{level:4},"What is ASMR"),n.a.createElement(Ve,null,"ASMR \u7684\u5168\u79f0\u662f Autonomous Sensory Meridian Response. \u603b\u4f53\u6765\u8bb2\uff0c\u5c31\u662f\u8ba9\u4f60\u611f\u5230\u8eab\u5fc3\u6109\u60a6\u7684\u58f0\u97f3\u3002\u6bd4\u5982\u8f7b\u67d4\u7684\u8033\u8bed\uff0c\u897f\u85cf\u94b5\u53d1\u51fa\u7684\u7ef5\u957f\u60a0\u8fdc\u7684\u58f0\u97f3\uff0c\u82a6\u835f\u80f6\u7684\u58f0\u97f3\uff0c\u8df3\u8df3\u7cd6\u7684\u58f0\u97f3\uff0c\u8214\u8033\u65f6\u820c\u82d4\u6469\u64e6\u8033\u5ed3\u7684\u58f0\u97f3\uff0c\u6d77\u6d6a\u62cd\u6253\u6c99\u6ee9\u7684\u58f0\u97f3\u3002"),n.a.createElement(ze,{level:4},"What is Gone Wild Audio"),n.a.createElement(Ve,null,"\u901a\u5e38\u7528\u6765\u6307\u4ee3\u8f6f\u8272\u60c5\u7684\u82f1\u6587\u97f3\u9891\u3002\u5176\u4e2d\u6709\u4e00\u4e9b\u7531\u7f51\u53cb\u7ea6\u5b9a\u4fd7\u6210\u7684\u6807\u7b7e\uff0c\u5b83\u4eec\u7684\u5927\u6982\u610f\u601d\u5982\u4e0b\uff1a"),n.a.createElement(Ve,null,"F4M: female for male \u4f5c\u8005\u662f\u5973\u6027\uff0c\u76ee\u6807\u89c2\u4f17\u662f\u7537\u6027"),n.a.createElement(Ve,null,"F4A: female for all \u4f5c\u8005\u662f\u5973\u6027\uff0c\u76ee\u6807\u89c2\u4f17\u662f\u7537\u6027\u6216\u5973\u6027"),n.a.createElement(Ve,null,"HFO: hand free orgasm"),n.a.createElement(Ve,null,"Fdom: \u8c03\u6559"),n.a.createElement(ze,{level:4},"\u97f3\u9891\u6765\u6e90\u4e8e\u54ea\u4e9b\u5e73\u53f0"),n.a.createElement(Ve,null,n.a.createElement("a",{href:"https://www.youtube.com/"},"Youtube")," \u4e0a\u9762\u6709\u975e\u5e38\u591a\u7684 ASMR \u5185\u5bb9\u7684\u89c6\u9891\uff0c\u8bed\u8a00\u4ee5\u82f1\u6587\u4e3a\u4e3b\u3002"),n.a.createElement(Ve,null,n.a.createElement("a",{href:"https://www.reddit.com/"},"Reddit")," ","\u4e00\u4e2a\u795e\u5947\u7684\u7f51\u7ad9\uff0c\u91cc\u9762\u6709\u4e0d\u8ba1\u5176\u6570\u7684\u4e3b\u9898\uff0c\u6db5\u76d6\u4e86\u5e7f\u6cdb\u7684\u4fe1\u606f\u5206\u652f\u548c\u5174\u8da3\u3002\u5176\u4e2d\u7684 GoneWildAudio \u662f\u6307\u8f6f\u8272\u60c5\u97f3\u9891\uff0c\u8fd9\u91cc\u662f\u4e0d\u5c11\u97f3\u9891\u7684\u53d1\u6e90\u5730\u3002"),n.a.createElement(Ve,null,n.a.createElement("a",{href:"https://soundgasm.net/"},"Soundgasm")," ","\u4e00\u4e2a\u97f3\u9891\u6258\u7ba1\u7f51\u7ad9\uff0c\u4e0a\u9762\u63d0\u5230\u7684 GoneWildAudio \u97f3\u9891\u57fa\u672c\u90fd\u6258\u7ba1\u5728\u8fd9\u4e2a\u7f51\u7ad9\u4e0a\u3002"),n.a.createElement(Ve,null,n.a.createElement("a",{href:"https://pastebin.com/"},"Pastebin"),' \u4e0d\u5c11 GoneWildAudio \u7684\u811a\u672c\u90fd\u4fdd\u5b58\u5728\u8fd9\u4e2a\u7f51\u7ad9\u4e0a\u3002\u4f7f\u7528\u97f3\u9891\u7684\u540d\u5b57\u52a0\u4e0a "site:pastebin" \u5728 Google \u4e0a\u641c\u7d22\uff0c\u5c31\u53ef\u80fd\u83b7\u5f97\u67d0\u4e2a\u97f3\u9891\u7684\u811a\u672c\u3002'),n.a.createElement(ze,{level:4},"\u56fd\u5185\u8d44\u6e90\u7f51\u7ad9"),n.a.createElement(Ve,null,n.a.createElement("a",{href:"https://18asmr.org/"},"18ASMR")," ","\u8d44\u6e90\u8d28\u91cf\u8fd8\u4e0d\u9519\uff0c\u7f51\u7ad9\u4e3b\u4eba\u770b\u6765\u4e5f\u662f\u4e2a ASMR \u7231\u597d\u8005\u3002\u7ecf\u5e38\u7b7e\u5230\u53ef\u4ee5\u83b7\u53d6\u90e8\u5206\u8d44\u6e90\uff0c\u67d0\u4e9b\u798f\u5229\u8d44\u6e90\u9700\u8981\u5145\u503c\u6210\u5e74\u5ea6\u4f1a\u5458\u3002"),n.a.createElement(Ve,null,n.a.createElement("a",{href:"https://eatasmr.com/"},"eatasmr")," ","\u8fd9\u4e2a\u662f\u505a\u7684\u6bd4\u8f83\u7528\u5fc3\u7684\u4e00\u4e2a\u7f51\u7ad9\uff0c\u6536\u8d39\u4e0a\u975e\u5e38\u514b\u5236\u3002\u7b7e\u5230\u3001\u81ea\u5df1\u4e0a\u4f20\u8d44\u6e90\u53ef\u4ee5\u83b7\u5f97\u79ef\u5206\uff0c\u79ef\u5206\u53ef\u4ee5\u7528\u6765\u83b7\u53d6\u8d44\u6e90\u3002"),n.a.createElement(Ve,null,n.a.createElement("a",{href:"https://www.missahri.com/"},"missahri")," ","\u8fd9\u4e2a\u7f51\u7ad9\u4e00\u822c\uff0c\u4ec5\u4f5c\u5907\u7528\u3002\u4e00\u662f\u56e0\u4e3a\u5927\u90e8\u5206\u8d44\u6e90\u662f\u56fd\u5185\u4e3b\u64ad\u5356\u8089\u7684\u6240\u8c13\u798f\u5229\u89c6\u9891\uff0c\u5176\u8d28\u91cf\u5176\u5b9e\u5f88\u4f4e\uff1b\u4e8c\u662f\u8fd9\u4e2a\u7f51\u7ad9\u5927\u90e8\u5206\u8d44\u6e90\u90fd\u662f\u6536\u8d39\u7684\uff0c\u5176\u5b9e\u5f88\u591a\u8d44\u6e90\u5728\u5176\u4ed6\u5730\u65b9\u90fd\u53ef\u4ee5\u514d\u8d39\u83b7\u53d6\u3002"),n.a.createElement(Ve,null,n.a.createElement("a",{href:"https://www.okfree.men/"},"\u81ea\u7531\u7537\u4eba\u7f51\u7edc\u786c\u76d8")," ","\u56fd\u5185\u5927\u90e8\u5206\u97f3\u58f0\u8d44\u6e90\u5728\u8fd9\u4e2a\u7f51\u76d8\u90fd\u53ef\u4ee5\u627e\u5230\uff0c\u6bd4\u5982\u6b65\u975e\u70df\u5de5\u4f5c\u5ba4\u7684\u5927\u90e8\u5206\u4f5c\u54c1\u3002"),n.a.createElement(ze,{level:4},"\u91ce\u5916\u8d44\u6e90\u5e38\u89c1\u7684\u5bc6\u7801\u96c6\u9526"),n.a.createElement(Ve,{copyable:!0},"bdtrysb"),n.a.createElement(Ve,{copyable:!0},"gmgard.us"),n.a.createElement(Ve,{copyable:!0},"eatasmr.com"),n.a.createElement(Ve,{copyable:!0},"missahri.live"),n.a.createElement(Ve,{copyable:!0},"18asmr.com"),n.a.createElement(Ve,{copyable:!0},"asmr18.com"),n.a.createElement(Ve,{copyable:!0},"18asmr.org"),n.a.createElement(ze,{level:4},"\u6b65\u975e\u70df\u7b2c\u4e00\u5b63 \u4f5c\u54c1\u76ee\u5f55"),n.a.createElement(Ve,null,n.a.createElement("a",{href:"https://www.missahri.com/audio/12137/"},"\u6b65\u975e\u70df\u7b2c\u4e00\u5b63\u5168\u90e8224\u671fASMR\u4e2d\u6587\u97f3\u58f0")),n.a.createElement(ze,{level:4},"\u6b65\u975e\u70df\u5c0f\u5c0f\u7684\u83dc\u5355 \u4f5c\u54c1\u76ee\u5f55")))},qe=(a(484),a(242)),Je=a(485),Xe=S.a.TextArea,Qe={labelCol:{span:6},wrapperCol:{span:12}},Ze={wrapperCol:{span:12,offset:6}},$e={name:null,bio:null,url:null,greetings:null,evaluation:null,coverFlow:[],representativeWorks:[]},et=Object(p.b)((function(e){return{authorProfile:e.authorProfile}}),{addAuthorProfile:function(e){return function(){var t=Object(i.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ADD_AUTHOR_PROFILE",payload:{error:null}}),t.prev=1,t.next=4,z.doc("".concat(e.name)).set(e,{merge:!0});case 4:a({type:"ADD_AUTHOR_PROFILE_DONE",payload:{error:null,profile:e}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"ADD_AUTHOR_PROFILE_FAIL",payload:{error:t.t0}});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},addAuthors:ee,uploadAvatar:function(e){var t=e.file,a=e.onProgress,r=e.onError,n=e.onSuccess;return(function(){var e=Object(i.a)(u.a.mark((function e(l){var c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c={contentType:"image/jpeg"},(o=J.child("images/"+t.name).put(t,c)).on(X.TaskEvent.STATE_CHANGED,(function(e){var r=e.bytesTransferred/e.totalBytes*100;switch(a({precent:r},t),console.log("Upload is "+r+"% done"),e.state){case X.TaskState.PAUSED:console.log("Upload is paused");break;case X.TaskState.RUNNING:console.log("Upload is running"),l({type:"UPLOAD_AVATAR",payload:{progress:r}});break;default:return void l({type:"UPLOAD_AVATAR",payload:{progress:r}})}}),(function(e){switch(e.code){case"storage/unauthorized":l({type:"UPLOAD_AVATAR_FAIL",payload:{error:"\u5b58\u50a8\u9519\u8bef\uff1a\u672a\u83b7\u5f97\u6388\u6743"}});break;case"storage/canceled":l({type:"UPLOAD_AVATAR_FAIL",payload:{error:"\u5b58\u50a8\u9519\u8bef\uff1a\u4e0a\u4f20\u88ab\u53d6\u6d88"}});break;case"storage/unknown":l({type:"UPLOAD_AVATAR_FAIL",payload:{error:"\u5b58\u50a8\u9519\u8bef\uff1a\u672a\u77e5"}});break;default:return r(e),void l({type:"UPLOAD_AVATAR_FAIL",payload:{error:"\u5b58\u50a8\u9519\u8bef\uff1a".concat(e.code)}})}}),(function(){o.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),n({downloadURL:e},t),l({type:"UPLOAD_AVATAR_DONE",payload:{error:null,downloadURL:e}})}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})((function(e){var t=e.addAuthorProfile,a=e.addAuthors,r=e.uploadAvatar,l=e.authorProfile.downloadURL,c=Object(y.g)(),o=H.a.useForm(),s=Object(j.a)(o,1)[0],m=!!c.state;m&&s.setFieldsValue(c.state);var p=function(){var e=Object(i.a)(u.a.mark((function e(r){var n,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("form data:",r),n=l||(m?c.state.avatar:null),o=Object(P.a)({},r,{avatar:n}),console.log("profileData",o),e.next=6,Promise.all([t(o),a(r.name)]);case 6:N.a.success(m?"\u66f4\u65b0\u4f5c\u8005\u6210\u529f":"\u6dfb\u52a0\u4f5c\u8005\u6210\u529f",1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,n,l,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.onProgress,n=t.onError,l=t.onSuccess,t.data,t.filename,c=t.file,t.withCredentials,t.action,t.headers,console.log("file",c),e.prev=2,e.next=5,r({file:c,onProgress:a,onError:n,onSuccess:l});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",null,n.a.createElement(H.a,Object.assign({},Qe,{initialValues:$e,form:s,onFinish:p}),n.a.createElement(H.a.Item,{name:"name",label:"\u540d\u5b57",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u5b57"}]},n.a.createElement(S.a,null)),n.a.createElement(H.a.Item,{label:"\u4e0a\u4f20",valuePropName:"fileList"},n.a.createElement(qe.a,{headers:{authorization:"authorization-text"},customRequest:E,beforeUpload:function(){},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?N.a.success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f")):"error"===e.file.status&&N.a.error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25."))}},n.a.createElement(T.a,null,n.a.createElement(Je.a,null)," \u70b9\u51fb\u4e0a\u4f20"))),n.a.createElement(H.a.Item,{name:"url",label:"\u94fe\u63a5"},n.a.createElement(S.a,null)),n.a.createElement(H.a.Item,{name:"greetings",label:"\u95ee\u5019"},n.a.createElement(Xe,{autoSize:{minRows:2,maxRows:5}})),n.a.createElement(H.a.Item,{name:"evaluation",label:"\u8bc4\u4ef7"},n.a.createElement(Xe,{autoSize:{minRows:2}})),n.a.createElement(H.a.Item,Ze,n.a.createElement(T.a,{htmlType:"submit",type:"primary",style:{width:"50%"}},m?"\u66f4\u65b0\u4f5c\u8005":"\u6dfb\u52a0\u4f5c\u8005"),n.a.createElement(T.a,{htmlType:"reset",onClick:function(){s.resetFields()},style:{width:"50%"}},"\u91cd\u7f6e"))))})),tt=(a(473),a(246)),at={labelCol:{span:8},wrapperCol:{span:8}},rt={wrapperCol:{offset:8,span:16}},nt=Object(p.b)((function(e){return{auth:e.auth}}),{signIn:function(e,t){return function(){var a=Object(i.a)(u.a.mark((function a(r){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"SIGN_IN",payload:{error:null}}),a.prev=1,a.next=4,G.signInWithEmailAndPassword(e,t);case 4:r({type:"SIGN_IN_DONE",payload:{error:null}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),r({type:"SIGN_IN_FAILED",payload:{error:a.t0}});case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.signIn,a=(e.currentUser,Object(y.f)()),r=function(){var e=Object(i.a)(u.a.mark((function e(r){var n,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.email,l=r.password,e.prev=1,e.next=4,t(n,l);case 4:N.a.success("\u6b22\u8fce\u60a8"),a.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),N.a.error("\u767b\u5f55\u5931\u8d25");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(H.a,Object.assign({},at,{name:"sign-in",initialValues:{remember:!0},onFinish:r,onFinishFailed:function(e){console.log("Failed:",e)},style:{marginTop:200}}),n.a.createElement(H.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},n.a.createElement(S.a,null)),n.a.createElement(H.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},n.a.createElement(S.a.Password,null)),n.a.createElement(H.a.Item,Object.assign({},rt,{name:"remember",valuePropName:"checked"}),n.a.createElement(tt.a,null,"Remember me")),n.a.createElement(H.a.Item,rt,n.a.createElement(T.a,{type:"primary",htmlType:"submit"},"Submit")))})),lt=a(490),ct=Object(p.b)(null,{signOut:function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SIGN_OUT",payload:{error:null}}),e.prev=1,e.next=4,G.signOut();case 4:t({type:"SIGN_OUT_DONE",payload:{error:null}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t({type:"SIGN_OUT_FAILED",payload:{error:e.t0}});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.signOut;return n.a.createElement(T.a,{size:"small",type:"link",onClick:function(){t()},icon:n.a.createElement(lt.a,null)},"\u767b\u51fa")})),ot=b.a.Header,st=b.a.Sider,ut=b.a.Content,it=Object(p.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth.currentUser;return t?n.a.createElement(b.a,null,n.a.createElement(st,{theme:"light",style:{minHeight:"100vh"}},n.a.createElement("div",{style:{font:"2em 'Segoe Script'",textAlign:"center",margin:"24px 0"}},"Soundgasm"),n.a.createElement(g.a,{mode:"inline",defaultSelectedKeys:["home"]},n.a.createElement(g.a.Item,{key:"home"},n.a.createElement(m.b,{to:"/"},n.a.createElement(O.a,null),n.a.createElement("span",null,"\u4e3b\u9875"))),n.a.createElement(g.a.Item,{key:"works"},n.a.createElement(m.b,{to:"/works"},n.a.createElement(v.a,null),n.a.createElement("span",null,"\u4f5c\u54c1"))),n.a.createElement(g.a.Item,{key:"authors"},n.a.createElement(m.b,{to:"/authors"},n.a.createElement(A.a,null),n.a.createElement("span",null,"\u827a\u672f\u5bb6"))),n.a.createElement(g.a.Item,{key:"tags"},n.a.createElement(m.b,{to:"/tags"},n.a.createElement(_.a,null),n.a.createElement("span",null,"\u6807\u7b7e"))),n.a.createElement(g.a.Item,{key:"faq"},n.a.createElement(m.b,{to:"/faq"},n.a.createElement(w.a,null),n.a.createElement("span",null,"FAQ"))))),n.a.createElement(b.a,null,n.a.createElement(ot,{style:{background:"white",display:"flex",justifyContent:"space-between",alignItems:"center"}},n.a.createElement(C,null),t?n.a.createElement(ct,null):null),n.a.createElement(ut,{style:{padding:16,background:"white"}},n.a.createElement(y.c,null,n.a.createElement(y.a,{path:"/",exact:!0},n.a.createElement(Ie,null)),n.a.createElement(y.a,{path:"/addWork"},n.a.createElement(se,null)),n.a.createElement(y.a,{path:"/addAuthor"},n.a.createElement(et,null)),n.a.createElement(y.a,{path:"/works"},n.a.createElement(De,null)),n.a.createElement(y.a,{path:"/authors"},n.a.createElement(Ge,null)),n.a.createElement(y.a,{path:"/tags"},n.a.createElement(Ye,null)),n.a.createElement(y.a,{path:"/faq"},n.a.createElement(Be,null)),n.a.createElement(y.a,{path:"/work"},n.a.createElement(_e,null))))),n.a.createElement(h.a,null)):n.a.createElement(nt,null)}));d.a.locale("zh-cn");var mt=Object(p.b)((function(e){return{auth:e.auth}}),{setCurrentUser:function(){return function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=G.onAuthStateChanged((function(e){t(e?{type:"SET_CURRENT_USER",payload:{currentUser:{email:e.email,uid:e.uid}}}:{type:"CLEAR_CURRENT_USER",payload:{currentUser:null}})})),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setCurrentUser;return Object(r.useEffect)((function(){function e(){return(e=Object(i.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),n.a.createElement(o.b,{locale:E.a},n.a.createElement(m.a,{basename:"/soundasm"},n.a.createElement(it,null)))})),pt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Et(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ft=a(72),dt=a(240),ht={currentUser:null},gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=void 0===r?{}:r,l=n.currentUser;switch(a){case"SET_CURRENT_USER":case"CLEAR_CURRENT_USER":return Object(P.a)({},e,{currentUser:l});default:return e}},bt=a(75),yt={error:null,isFetching:!1,items:[]},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=void 0===r?{}:r,l=n.error,c=n.isFetching,o=n.items,s=n.work,u=n.exists;switch(a){case"FETCH_WORKS_FAIL":return Object(P.a)({},e,{isFetching:c,error:l});case"FETCH_WORKS_DONE":return Object(P.a)({},e,{isFetching:c,items:o});case"FETCH_WORKS":return Object(P.a)({},e,{isFetching:c});case"CHECK_WORK_EXISTS":return Object(P.a)({},e,{exists:u});case"ADD_WORK":return Object(P.a)({},e);case"ADD_WORK_FAIL":return Object(P.a)({},e,{error:l});case"ADD_WORK_DONE":return Object(P.a)({},e,{items:[s].concat(Object(bt.a)(e.items)),error:l});case"UPDATE_WORK":case"UPDATE_WORK_FAIL":return Object(P.a)({},e,{error:l});case"UPDATE_WORK_DONE":return Object(P.a)({},e,{items:Object(bt.a)(e.items.map((function(e){return e.id===s.id?s:e})))});default:return e}},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,error:null,tagItems:{}},t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=void 0===r?{}:r,l=n.isFetching,c=n.error,o=n.tagItems,s=n.tags;switch(a){case"FETCH_TAGS":return Object(P.a)({},e,{isFetching:l});case"FETCH_TAGS_DONE":return Object(P.a)({},e,{isFetching:l,tagItems:o});case"FETCH_TAGS_FAIL":return Object(P.a)({},e,{isFetching:l,error:c});case"ADD_TAGS":return Object(P.a)({},e,{error:c});case"ADD_TAGS_DONE":return Object(P.a)({},e,{tagItems:Object(P.a)({},e.tagItem,{},s),error:c});case"ADD_TAGS_FAIL":return Object(P.a)({},e,{error:c});default:return e}},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,error:null,authorItems:{}},t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=void 0===r?{}:r,l=n.isFetching,c=n.error,o=n.newAuthors,s=n.authorItems;switch(a){case"FETCH_AUTHORS":case"FETCH_AUTHORS_FAIL":return Object(P.a)({},e,{isFetching:l,error:c});case"FETCH_AUTHORS_DONE":return Object(P.a)({},e,{isFetching:l,error:c,authorItems:s});case"ADD_AUTHORS":return Object(P.a)({},e,{error:c});case"ADD_AUTHORS_DONE":return Object(P.a)({},e,{authorItems:Object(P.a)({},e.authorItems,{},o),error:c});case"ADD_AUTHORS_FAIL":return Object(P.a)({},e,{error:c});default:return e}},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,error:null,profile:null},t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=void 0===r?{}:r,l=n.error,c=n.profile,o=n.profiles,s=n.isFetching,u=n.downloadURL,i=n.progress;switch(a){case"ADD_AUTHOR_PROFILE":return e;case"ADD_AUTHOR_PROFILE_FAIL":return Object(P.a)({},e,{error:l});case"ADD_AUTHOR_PROFILE_DONE":return Object(P.a)({},e,{profile:c});case"FETCH_AUTHOR_PROFILES":return Object(P.a)({},e,{isFetching:s});case"FETCH_AUTHOR_PROFILES_FAIL":return Object(P.a)({},e,{isFetching:s,error:l});case"FETCH_AUTHOR_PROFILES_DONE":return Object(P.a)({},e,{isFetching:s,profiles:o});case"UPLOAD_AVATAR":return Object(P.a)({},e,{progress:i});case"UPLOAD_AVATAR_FAIL":return Object(P.a)({},e,{progress:i,error:l});case"UPLOAD_AVATAR_DONE":return Object(P.a)({},e,{progress:i,downloadURL:u});default:return e}},wt={error:null,isFetching:!1,isSubmitting:!1,commentItems:{}},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=void 0===r?{}:r,l=n.newComment,c=n.error,o=n.isFetching,s=n.comments,u=n.isSubmitting;switch(a){case"FETCH_COMMENTS_BY_WORK":case"FETCH_COMMENTS_BY_WORK_FAILED":return Object(P.a)({},e,{isFetching:o,error:c});case"FETCH_COMMENTS_BY_WORK_DONE":return Object(P.a)({},e,{isFetching:o,commentItems:s});case"ADD_COMMENT":return Object(P.a)({},e,{isSubmitting:u});case"ADD_COMMENT_FAILED":return Object(P.a)({},e,{error:c,isSubmitting:u});case"ADD_COMMENT_DONE":return Object(P.a)({},e,{error:c,isSubmitting:u,commentItems:Object(P.a)({},e.commentItems,Object(Q.a)({},l.id,l))});default:return e}},Tt={author:"",rating:"",language:"",tag:""},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload,n=void 0===r?{}:r,l=n.filter;switch(a){case"SET_VISIBILITY_FILTER":return Object(P.a)({},e,{},l);default:return e}},Ft=Object(ft.c)({auth:gt,works:Ot,tags:vt,authors:At,authorProfile:_t,comments:It,visibilityFilter:kt}),jt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ft.d,St=Object(ft.e)(Ft,jt(Object(ft.a)(dt.a)));a(481);c.a.render(n.a.createElement(p.a,{store:St},n.a.createElement(mt,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/soundasm",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/soundasm","/service-worker.js");pt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Et(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Et(t,e)}))}}()}},[[247,1,2]]]);
//# sourceMappingURL=main.f8f72008.chunk.js.map